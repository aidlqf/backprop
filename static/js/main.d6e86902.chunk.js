(this["webpackJsonpBackpropagation-Visualizer"]=this["webpackJsonpBackpropagation-Visualizer"]||[]).push([[0],{183:function(t,e,n){},461:function(t,e){},462:function(t,e){},470:function(t,e){},473:function(t,e){},474:function(t,e){},476:function(t,e,n){},481:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"formatWeightArray",(function(){return X})),n.d(a,"toFunc2DArray",(function(){return J})),n.d(a,"flatten",(function(){return Y})),n.d(a,"getRandomInt",(function(){return G})),n.d(a,"tensorToArray",(function(){return H}));var r=n(16),s=n.n(r),i=n(150),c=n.n(i),o=n(19),l=n(3),h=n.n(l),u=n(70),d=n(11),p=n(4),f=n(9),x=n(45),b=n(12),j=n(13),g=n(494),y=n(497),v=n(498),m=n(501),O=n(508),w=n(502),k=n(503),S=n(504),C=n(510),z=n(509),F=n(505),D=n(506),P=n(495),A=n(496),L=n(499),N=n(500),M=n(43),T=n(46),B=(n(183),n(21));var I=function(){var t=150;return Object(B.jsx)("div",{children:Object(B.jsxs)("svg",{width:t,height:20,class:"grad",overflow:"visible",children:[Object(B.jsx)("text",{fill:"black",fontFamily:"sans-serif",fontSize:"12px",x:0,y:-4,children:"Color Indicates Weight"}),Object(B.jsx)("text",{fill:"grey",x:0,y:30,children:"|"}),Object(B.jsx)("text",{fill:"grey",x:-3,y:45,children:"\u2013"}),Object(B.jsx)("text",{fill:"grey",x:73,y:30,children:"|"}),Object(B.jsx)("text",{fontSize:"13px",fill:"grey",x:72,y:45,children:"0"}),Object(B.jsx)("text",{fill:"grey",x:147,y:30,children:"|"}),Object(B.jsx)("text",{fill:"grey",x:144,y:45,children:"+"})]})})},E=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).state={widths:32,zoom:15,macro:!1,micro:!1},a.zoom=a.zoom.bind(Object(x.a)(a)),a}return Object(f.a)(n,[{key:"zoom",value:function(t,e,n,a,r,s){t.attr("transform","translate(".concat(-n*r,", ").concat(-a*r,")scale(").concat(r,")"))}},{key:"flatten",value:function(t){for(var e=[],n=0;n<t.length;n++)for(var a=0;a<t[n].length;a++)e.push(t[n][a]);return e}},{key:"render",value:function(){var t=this,e=[];if(this.props.mode){var n=this.props.trans;e=this.flatten(n.model)}var a=this.props.children,r=this.props.weights.length,s="#D62839",i="#4BA3C3",c=T.e().x((function(t){return t.x})).y((function(t){return t.y})),o=Object(B.jsx)("svg",{id:"p",width:"800",height:"500",overflow:"visible",children:Object(B.jsxs)("g",{transform:"scale(1)",children:[Object(B.jsx)("path",{d:"M 750, 234 L 750, 300",stroke:0!=r?"#F50257":"#ededed",className:this.props.playing}),Object(B.jsx)("path",{d:c({source:{x:766,y:315},target:{x:880,y:430}}),stroke:0!=r?"#F50257":"#ededed",fill:"none",className:this.props.playing}),Object(B.jsx)("path",{d:c({source:{x:766,y:250},target:{x:880,y:150}}),stroke:0!=r?"#F50257":"#ededed",fill:"none",className:this.props.playing}),this.props.links.map((function(e,n){return Object(B.jsx)("path",{d:e,className:t.props.playing,strokeWidth:0===r?1:Math.pow(t.props.weights[n],2)+.1,stroke:0!==r?t.props.weights[n]>0?i:s:"#ededed",fill:"none"},n)})),this.props.rects.map((function(e,n){return Object(B.jsx)("rect",{x:e.x,y:e.y,width:t.state.widths,height:t.state.widths,onClick:function(){t.props.onClick()},fill:"lightgrey"},n)})),Object(B.jsx)("rect",{x:734,y:300,width:32,height:32,fill:"none",stroke:"black"}),Object(B.jsx)("text",{fontSize:"13px",x:738,y:318,children:"Loss"})]})}),l="1px",h=T.d(),u=function(t,e,n){return Object(B.jsx)("path",{d:h([t,e]),stroke:n,strokeWidth:"0.1"})},d=function(t,e,n,a){return Object(B.jsxs)("g",{children:[u([1,.75],[4,.75],"black"),u([1,2.25],[4,2.25],"black"),u([4,.75],[6,1.5],"black"),u([4,2.25],[6,1.5],"black"),(r=5,s=.5,Object(B.jsxs)("svg",{x:r,y:s,width:2,height:2,children:[Object(B.jsx)("rect",{width:2,height:2,x:0,y:0,fill:"white"}),Object(B.jsx)("text",{fontSize:"2px",x:.5,y:2,children:"*"})]}))]});var r,s},p=function(t,e){return Object(B.jsxs)("svg",{x:t,y:e,width:2,height:2,children:[Object(B.jsx)("rect",{width:2,height:2,x:0,y:0,fill:"white"}),Object(B.jsx)("text",{fontSize:"2px",x:.5,y:1.5,children:"+"})]})},f=function(t,e){return Object(B.jsxs)("svg",{x:t,y:e,width:2,height:2,children:[Object(B.jsx)("rect",{width:2,height:2,x:0,y:0,fill:"white"}),Object(B.jsx)("text",{fontSize:"0.5px",x:.25,y:.5,children:"ReLU"}),u([0,1.5],[1,1.5],"black"),u([1,1.5],[2,.5],"black")]})},x=Object(B.jsx)("svg",{id:"pp",width:"800",height:"500",children:Object(B.jsxs)("g",{id:"gpp",children:[Object(B.jsx)("path",{d:"M 750, 234 L 750, 300",stroke:"black",className:this.props.backward}),this.props.rects.map((function(n,a){return Object(B.jsxs)("g",{id:"ggpp",children:[Object(B.jsx)("rect",{x:n.x,y:n.y,width:t.state.widths,height:t.state.widths,onClick:function(){console.log(n);var e=T.i("#pp").select("g");t.zoom(e,T.c,n.x-16,n.y,t.state.zoom,1500),t.setState({micro:!0})},fill:"lightgrey"}),Object(B.jsx)("text",{fill:"blue",x:n.x+32,y:n.y+16,children:0!==e.length&&a<t.props.nshow?a>0?e[a-1].output.toFixed(2):t.props.input:""}),Object(B.jsx)("text",{fill:"red",x:n.x-40,y:n.y+16,children:0!==e.length&&a>t.props.bshow&&a>0?e[a-1].dInputsSum.toFixed(2):""}),a>0&&t.state.micro?(r=n.x+2,s=n.y,i=e.length>0?e[a-1]:[],Object(B.jsxs)("svg",{width:32,height:32,x:r,y:s,children:[0==i.length?"":i.inputs.map((function(t,e){return Object(B.jsxs)("g",{children:[Object(B.jsxs)("svg",{width:10,height:4,x:0,y:3.5*e,children:[Object(B.jsx)("text",{fontSize:l,x:0,y:1,children:"x"}),Object(B.jsx)("text",{fontSize:"0.5px",x:.5,y:1.2,children:e}),Object(B.jsx)("text",{fontSize:l,x:0,y:2.5,children:"w"}),Object(B.jsx)("text",{fontSize:"0.5px",x:.6,y:2.7,children:e}),u([6,1.5],[10,1.5],"black"),d()]}),u([10,3.5*e+1.5],[18.25,16],"black"),i.inputs.map((function(t,e){return Object(B.jsx)("text",{fontSize:"0.75px",fill:"blue",x:1,y:.7+3.5*e,children:t.toFixed(4)})})),i.dInputs.map((function(t,e){return Object(B.jsx)("text",{fontSize:"0.75px",fill:"red",x:1,y:1.4+3.5*e,children:t.toFixed(4)})})),i.weights.map((function(t,e){return Object(B.jsx)("text",{fontSize:"0.75px",fill:"blue",x:1,y:2.2+3.5*e,children:t.toFixed(4)})})),i.dWeights.map((function(t,e){return Object(B.jsx)("text",{fontSize:"0.75px",fill:"red",x:1,y:2.9+3.5*e,children:t.toFixed(4)})})),Object(B.jsx)("text",{fontSize:"0.75px",fill:"blue",x:1,y:29.7,children:i.bias.toFixed(4)}),Object(B.jsx)("text",{fontSize:"0.75px",fill:"red",x:1,y:30.4,children:i.dBias.toFixed(4)}),i.multStep.map((function(t,e){return Object(B.jsx)("text",{fontSize:"0.75px",fill:"blue",x:7.25,y:1.4+3.5*e,children:t.toFixed(4)})})),i.dSumStep.map((function(t,e){return Object(B.jsx)("text",{fontSize:"0.75px",fill:"red",x:7.25,y:2.1+3.5*e,children:t.toFixed(4)})})),Object(B.jsx)("text",{fontSize:"0.75px",fill:"blue",x:20.1,y:16,children:i.sumStep.toFixed(4)}),Object(B.jsx)("text",{fontSize:"0.75px",fill:"red",x:20.1,y:16.7,children:i.dActStep.toFixed(4)}),Object(B.jsx)("text",{fontSize:"0.75px",fill:"blue",x:26.2,y:16,children:i.actStep.toFixed(4)}),Object(B.jsx)("text",{fontSize:"0.75px",fill:"red",x:26.2,y:16.7,children:i.dvalue.toFixed(4)})]},e)})),Object(B.jsx)("text",{fontSize:l,x:0,y:30,children:"b"}),u([.75,29.75],[10,29.75],"black"),u([10,29.75],[18.25,16],"black"),u([19,16],[30,16],"black"),p(18,15),f(24,15)]})):""]},a);var r,s,i})),this.props.links.map((function(e,n){return Object(B.jsx)("path",{d:e,className:t.props.backward,strokeWidth:Math.pow(t.props.weights[n],2)+.05,stroke:0!==t.props.weights.length?t.props.weights[n]>0?i:s:"#ededed",fill:"none"},n)})),Object(B.jsx)("rect",{x:734,y:300,width:32,height:32,fill:"none",stroke:"black"}),Object(B.jsx)("text",{fontSize:"13px",x:738,y:318,children:"Loss"}),Object(B.jsx)("text",{x:734,y:350,children:this.props.mode&&this.props.nshow>18?this.props.trans.loss.output.toFixed(2):""}),Object(B.jsx)("text",{x:734,y:295,fill:"red",children:this.props.mode&&this.props.bshow<1/0&&this.props.bshow>0?this.props.trans.loss.dInputs.toFixed(2):""})]})});return Object(B.jsxs)("div",{id:"nn",children:[a,this.props.mode?x:o,Object(B.jsx)(I,{})]})}}]),n}(r.Component),W=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).state={},a}return Object(f.a)(n,[{key:"plotPoints",value:function(t,e){t.selectAll("circle").data(e).enter().append("circle").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).attr("r",2).style("fill","#175676")}},{key:"componentDidMount",value:function(){var t=Object(d.a)(h.a.mark((function t(){var e,n,a,r,s,i,c,o,l,u,d,p;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.props,n=e.width,a=e.height,r=e.padding,s=e.start,i=e.stop,c=T.i("#nice"),(o=c.append("svg").attr("width",n).attr("height",a).style("overflow","visible")).append("rect").attr("width",n).attr("height",a).attr("class","cord"),l=T.h().domain([s,i]).range([0,n-2*r]),u=T.h().domain([s,i]).range([a-2*r,0]),d=T.a().scale(l),p=T.b().scale(u),o.append("g").attr("class","axis").attr("transform","translate(0,".concat(a-2*r,")")).call(d),o.append("g").attr("class","axis").attr("transform","translate("+(n-2*r)+",0)").call(p),o.append("line").attr("x1",0).attr("y1",(a+1)/2).attr("x2",n).attr("y2",(a+1)/2).attr("class","split"),o.append("line").attr("x1",(n+1)/2).attr("y1",0).attr("x2",(n+1)/2).attr("y2",a).attr("class","split"),o.append("path").attr("id","epic").attr("stroke","none").attr("fill","none");case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){for(var t=this.props,e=t.width,n=t.height,a=t.padding,r=t.start,s=t.stop,i=t.X,c=t.y,o=t.yhat,l=T.h().domain([r,s]).range([0,e-2*a]),h=T.h().domain([r,s]).range([n-2*a,0]),u=T.i("#nice").select("svg"),d=[],p=0;p<i.length;p++)d.push({x:l(i[p]),y:h(c[p])});for(var f=[],x=0;x<i.length;x++)f.push([l(i[x]),h(o[x])]);u.selectAll("circle").remove(),this.plotPoints(u,d),u.select("#epic").attr("d",T.d()(f)).attr("stroke","#F50257").attr("fill","none")}},{key:"render",value:function(){return Object(B.jsx)("div",{id:"nice"})}}]),n}(r.Component),R=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).state={},a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var t=T.i("#sweet"),e=100,n=300,a=T.h().domain([0,-1]).range([0,300]),r=T.h().domain([0,1]).range([100,0]),s=t.append("svg").attr("width",n).attr("height",e).style("overflow","visible");s.append("rect").attr("width",n).attr("height",e).attr("class","cord");var i=T.a().scale(a),c=T.b().scale(r);s.append("g").attr("class","axis").attr("id","x").attr("transform","translate(0,".concat(100,")")).call(i),s.append("g").attr("class","axis").attr("id","y").attr("transform","translate(300,0)").call(c.ticks(0)),s.append("path").attr("id","line").attr("stroke","none").attr("fill","none")}},{key:"componentDidUpdate",value:function(){for(var t=this.props,e=t.lossArray,n=(t.loss,e.length-1),a=T.h().domain([0,n]).range([0,300]),r=T.g(e),s=T.f(e),i=T.h().domain([r,s]).range([100,0]),c=T.i("#sweet").select("svg"),o=[],l=0;l<e.length;l++)o.push([a(l),i(e[l])]);var h=T.a().scale(a),u=T.b().scale(i);c.select("#x").attr("transform","translate(0,".concat(100,")")).call(h.ticks(5)),c.select("#y").attr("transform","translate(300,0)").call(u.ticks(5)),c.select("#line").attr("d",T.d()(o)).attr("stroke","#F50257").attr("fill","none")}},{key:"render",value:function(){return Object(B.jsx)("div",{id:"sweet"})}}]),n}(r.Component),U=function(){function t(e,n){Object(p.a)(this,t),this.weights=e,this.bias=n}return Object(f.a)(t,[{key:"mult",value:function(t,e){return t.map((function(t,n){return t*e[n]}))}},{key:"dMult",value:function(t,e){return this.mult(t,e)}},{key:"sum",value:function(t){return t.reduce((function(t,e){return t+e}))}},{key:"dSum",value:function(t,e){for(var n=[],a=0;a<e;a++)n.push(t);return n}},{key:"linear",value:function(t){return t}},{key:"forward",value:function(t,e){var n=this.weights,a=this.bias,r=this.mult,s=this.sum,i=r(t,n),c=s(i)+a,o=e(c);this.inputs=t,this.multStep=i,this.sumStep=c,this.actStep=o,this.output=o}},{key:"backward",value:function(t,e){var n=this.inputs,a=this.weights,r=this.actStep,s=this.dSum,i=this.mult,c=this.sum,o=e(r)*t,l=s(o,n.length),h=o,u=i(l,n),d=i(l,a),p=c(d);this.dvalue=t,this.dActStep=o,this.dSumStep=l,this.dBias=h,this.dWeights=u,this.dInputs=d,this.dInputsSum=p}}]),t}(),V=function(){function t(){Object(p.a)(this,t)}return Object(f.a)(t,[{key:"forward",value:function(t,e){var n=t-e,a=this.output=Math.pow(t-e,2);this.subStep=n,this.squareStep=a,this.output=a}},{key:"backward",value:function(){this.dInputs=2*this.subStep}}]),t}(),q=function(){function t(e,n,a){Object(p.a)(this,t),this.model=[],this.loss=new V,this.shape=e;for(var r=0;r<n.length;r++){for(var s=[],i=0;i<n[r].length;i++)s.push(new U(n[r][i],a[r][i]));this.model.push(s)}}return Object(f.a)(t,[{key:"sum",value:function(t){return t.reduce((function(t,e){return t+e}))}},{key:"dReLU",value:function(t){return t>0?1:0}},{key:"dLinear",value:function(t){return 1}},{key:"ReLU",value:function(t){return Math.max(0,t)}},{key:"linear",value:function(t){return t}},{key:"forward",value:function(t,e){for(var n=[t],a=this.model.length,r=0;r<a-1;r++){for(var s=[],i=0;i<this.model[r].length;i++)this.model[r][i].forward(n,this.ReLU),s.push(this.model[r][i].output);n=s}this.model[a-1][0].forward(n,this.linear),this.yhat=this.model[a-1][0].output,this.loss.forward(this.yhat,e)}},{key:"backward",value:function(){var t=this.sum;this.loss.backward();var e=[this.loss.dInputs],n=this.model.length,a=t(e);this.model[n-1][0].backward(a,this.dLinear),e=[this.model[n-1][0].dInputsSum];for(var r=n-2;r>=0;r--){a=t(e),e=[];for(var s=0;s<this.model[r].length;s++)this.model[r][s].backward(a,this.dReLU),e.push(this.model[r][s].dInputsSum)}}}]),t}();function X(t,e){for(var n=[],a=0;a<t.length;a++){for(var r=e[a+1],s=[],i=0;i<r;i++){for(var c=[],o=i;o<t[a].length;o+=r)c.push(t[a][o]);s.push(c)}n.push(s)}return n}function J(t,e){for(var n=0;n<t.length;n++)for(var a=0;a<t[n].length;a++)t[n][a]=+t[n][a].toFixed(e);return t}function Y(t){for(var e=[],n=0;n<t.length;n++)for(var a=0;a<t[n].length;a++)e.push(t[n][a]);return e}function G(t){return Math.floor(Math.random()*Math.floor(t))}function H(t){return Array.from(t.dataSync())}n(476);var K=a.flatten,Q=a.formatWeightArray,Z=a.tensorToArray,$=function(t){Object(b.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).anim=Object(d.a)(h.a.mark((function t(){var e,n,r,s,i,c,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(t){return new Promise((function(e){return setTimeout(e,t)}))},n=500,r=a.state.shape.reduce((function(t,e){return t+e}))-1,a.setState(Object(u.a)(Object(u.a)({},a.state),{},{subEpoch:"forward",direction:"edgeForward",nshow:0,bshow:1/0})),t.next=6,e(n);case 6:a.setState({nshow:1}),s=1;case 8:if(!(a.state.nshow<r)){t.next=16;break}return i=a.state.shape[s],t.next=12,e(n);case 12:a.setState({nshow:a.state.nshow+=i}),s++,t.next=8;break;case 16:return t.next=18,e(n);case 18:return a.setState({nshow:a.state.nshow+=1}),t.next=21,e(n);case 21:return a.setState({nshow:a.state.nshow+=1}),a.setState({bshow:1/0}),a.setState(Object(u.a)(Object(u.a)({},a.state),{},{direction:"edgeBackward",subEpoch:"backward"})),t.next=26,e(n);case 26:return a.setState({bshow:r}),t.next=29,e(n);case 29:a.setState({bshow:a.state.bshow-=1}),c=a.state.shape.length-2;case 31:if(!(a.state.bshow>0)){t.next=39;break}return o=a.state.shape[c],t.next=35,e(n);case 35:a.setState({bshow:a.state.bshow-=o}),c--,t.next=31;break;case 39:a.setState({direction:"edgePaused"});case 40:case"end":return t.stop()}}),t)}))),a.state={loss:null,duringEpoch:!1,shape:[1,8,8,1],epoch:0,yhat:[],biasesData:[],weightsData:[],lr:.01,data:{X:[],y:[]},scale:5,curve:"sin",controls:{playing:!1,speed:0},nshow:0,bshow:1/0,microShow:0,rects:[],weights:[],links:[],nn:null,mode:!1,trans:null,macro:!1,direction:"edgePaused",subEpoch:"forward",sliderVal:2,vSliderVal:2,vSliderConv:6,lossArray:[]},a.run=a.run.bind(Object(x.a)(a)),a.genTensorData=a.genTensorData.bind(Object(x.a)(a)),a.mutate=a.mutate.bind(Object(x.a)(a)),a.train=a.train.bind(Object(x.a)(a)),a.printParameters=a.printParameters.bind(Object(x.a)(a)),a.reset=a.reset.bind(Object(x.a)(a)),a.asyncPause=a.asyncPause.bind(Object(x.a)(a)),a.resetParameters=a.resetParameters.bind(Object(x.a)(a)),a.changeModelLr=a.changeModelLr.bind(Object(x.a)(a)),a.initNeuralNetwork=a.initNeuralNetwork.bind(Object(x.a)(a)),a.anim=a.anim.bind(Object(x.a)(a)),a}return Object(f.a)(n,[{key:"initNeuralNetwork",value:function(t){if(this.state.controls.playing){if(this.state.controls.playing){var e=K(this.state.weightsData);this.setState({weights:e})}}else{var n=T.h().domain([0,100]).range([50,750]),a=T.h().domain([0,100]).range([500,0]),r={x:34,y:234},s={x:734,y:234},i=T.e().x((function(t){return t.x+16})).y((function(t){return t.y+16})),c=[0,25,50,75,0],o=[],l=[];o.push([r]),l.push(r);for(var h=1;h<t.length-1;h++){for(var u=[],d=0;d<t[h];d++){var p={x:n(c[h])-16,y:a(92-12*d)-16};u.push(p),l.push(p)}o.push(u)}l.push(s),o.push([s]);for(var f=[],x=t.length-1;x>0;x--)for(var b=-14.5,j=0;j<t[x-1];j++){for(var g=0;g<t[x];g++)f.push(i({source:{x:o[x-1][j].x+15.5,y:o[x-1][j].y},target:{x:o[x][g].x-15,y:o[x][g].y+b}}));b+=3.5}this.setState({rects:l}),this.setState({links:f})}}},{key:"changeModelLr",value:function(t){var e=this;M.m((function(){e.setState({lr:t})}))}},{key:"run",value:function(){var t=Object(d.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!this.state.controls.playing,this.mutate("controls","playing",e),!0!==e){t.next=6;break}return t.next=5,this.train(this.state.data.X,this.state.data.y);case 5:console.log("epic");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"mutate",value:function(t,e,n){var a=this;M.m((function(){var r=Object(u.a)({},a.state);t in r&&e in r[t]?(r[t][e]=n,a.setState({state:r})):console.error("Could not be found in state")}))}},{key:"addModel",value:function(t){var e=this;return M.m((function(){var n=e.state.shape;t.add(M.c.dense({inputShape:[1],units:n[1],activation:"relu",useBias:!0}));for(var a=2;a<n.length-1;a++)t.add(M.c.dense({units:n[a],activation:"relu",useBias:!0}));return t.add(M.c.dense({units:1,activation:"linear",useBias:!0})),t}))}},{key:"modelCompile",value:function(t){var e=M.h();return this.addModel(e),e.compile({optimizer:M.n.sgd(t),loss:"meanSquaredError"}),e}},{key:"train",value:function(){var t=Object(d.a)(h.a.mark((function t(e,n){var a,r,s,i,c,o,l=this;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=M.m((function(){return M.l(e)})),r=M.m((function(){return M.l(n)})),s=M.m((function(){return l.state.nn})),i=function(t){return new Promise((function(e){return setTimeout(e,t)}))},c=this.state.controls.playing;case 5:if(!1===c){t.next=17;break}return this.setState({duringEpoch:!0}),o=this.state.controls.playing,c=o,t.next=11,s.fit(a,r,{epochs:1});case 11:return M.m((function(){var t=s.predict(a),e=Z(t),r=M.e.meanSquaredError(n,e).dataSync()[0];l.printParameters(s,r,e,l.state.epoch+1)})),this.setState({duringEpoch:!1}),t.next=15,i(this.state.controls.speed);case 15:t.next=5;break;case 17:this.setState({nn:s}),M.b(a),M.b(r);case 20:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"genTensorData",value:function(){var t=Object(d.a)(h.a.mark((function t(e,n){var a=this;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.g();case 2:M.m((function(){var t,r=M.d(-a.state.scale,a.state.scale,50);t=M.f(e(r),n);var s=M.o(r),i=Z(r),c=Z(t),o=Z(s);a.setState(Object(u.a)(Object(u.a)({},a.state),{},{data:{X:i,y:c},yhat:o}))}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"printParameters",value:function(t,e,n,a){for(var r=[],s=[],i=0;i<t.getWeights().length;i++)(i%2===0?r:s).push(Array.from(t.getWeights()[i].dataSync()));var c=[].concat(Object(o.a)(this.state.lossArray),[e]);this.setState({biasesData:s,weightsData:r,loss:e,yhat:n,epoch:a,lossArray:c}),this.initNeuralNetwork(this.state.shape)}},{key:"asyncPause",value:function(){var t=Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({controls:Object(u.a)(Object(u.a)({},this.state.controls),{},{playing:!1})});case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"resetParameters",value:function(){var t=Object(d.a)(h.a.mark((function t(e){var n,a,r,s=this;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return M.b(this.state.nn),n=this.state.curve,M.m((function(){"sin"===n?a=M.j:"tanh"===n?a=M.k:"cos"===n&&(a=M.a)})),t.next=5,this.genTensorData(a,e);case 5:r=M.m((function(){return s.modelCompile(s.state.lr)})),this.setState(Object(u.a)(Object(u.a)({},this.state),{},{epoch:0,loss:null,weights:[],nn:r,lossArray:[]})),M.b(undefined);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"reset",value:function(){var t=Object(d.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.asyncPause(),this.resetParameters(e);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=Object(d.a)(h.a.mark((function t(){var e,n=this;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:M.i("cpu"),this.genTensorData(M.j,this.state.scale),this.initNeuralNetwork(this.state.shape),e=M.m((function(){return n.modelCompile(.01)})),this.setState({nn:e});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(){return!this.state.duringEpoch}},{key:"render",value:function(){var t=this,e=this.state,n=e.shape,a=e.scale,r=e.trans,s=e.weightsData,i=e.biasesData,c=e.yhat,l=e.rects,p=e.links,f=e.weights,x=e.mode,b=e.epoch,j=e.curve,T=e.lr,I=e.loss,U=e.controls,V=e.data,X=U.playing,J=U.speed,Y=V.X,G=V.y,H=Object(o.a)(n);H.splice(0,1),H.splice(H.length-1,1);var K=[.001,.01,.1,.3,1..toFixed(1)],Z=[{label:"sin",eqn:M.j,scale:5},{label:"cos",eqn:M.a,scale:5},{label:"tanh",eqn:M.k,scale:5}],$=Object(B.jsx)(g.a,{style:{background:this.state.controls.playing?"#D62839":"#175676",color:"white"},disableTouchRipple:!0,onClick:function(){return t.run()},children:X?Object(B.jsx)(A.a,{}):Object(B.jsx)(P.a,{})}),_=Object(B.jsxs)(y.a,{children:[Object(B.jsx)(v.a,{disabled:X,onClick:function(){t.reset(a)},children:Object(B.jsx)(L.a,{})}),$,Object(B.jsx)(v.a,{style:{color:0===J?"grey":"#FFC006"},onClick:function(){t.setState({controls:Object(u.a)(Object(u.a)({},U),{},{speed:0===J?100:0})})},children:Object(B.jsx)(N.a,{})})]}),tt=Object(B.jsx)(y.a,{children:Object(B.jsx)(m.a,{onClick:Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.anim();case 2:case"end":return e.stop()}}),e)}))),children:"REPLAY"})}),et=Object(B.jsxs)(O.a,{width:400,children:[Object(B.jsx)(w.a,{variant:"outlined",children:Object(B.jsxs)(k.a,{children:[Object(B.jsx)(S.a,{variant:"caption",style:{color:"#4BA3C3"},children:"Control Center"}),Object(B.jsx)("div",{on:!0}),Object(B.jsx)("a",{onClick:Object(d.a)(h.a.mark((function e(){var a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(t){return new Promise((function(e){return setTimeout(e,t)}))},r=Q(s,n),(c=new q(n,r,i)).forward(Y[0],G[0]),c.backward(),t.setState({trans:c,mode:!x}),e.next=8,a(1e3);case 8:return t.setState({nshow:1}),function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.state.nshow<19)){e.next=6;break}return e.next=3,a(1e3);case 3:t.setState({nshow:t.state.nshow+=8}),e.next=0;break;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=12,t.anim();case 12:case"end":return e.stop()}}),e)}))),children:Object(B.jsxs)(S.a,{variant:"h4",children:["Epoch: ",b]})}),Object(B.jsxs)(S.a,{variant:"h6",children:["loss:",null==I?"":I.toFixed(6)]}),this.state.mode?tt:_,Object(B.jsx)(y.a,{})]})}),Object(B.jsx)(O.a,{marginTop:5,children:Object(B.jsx)(w.a,{variant:"outlined",children:Object(B.jsxs)(k.a,{children:[Object(B.jsx)(S.a,{variant:"caption",style:{color:"#4BA3C3"},children:"Customization"}),Object(B.jsxs)(y.a,{children:[Object(B.jsx)(S.a,{variant:"caption",children:"Learning Rate"}),K.map((function(e,n){return Object(B.jsx)(C.a,{disabled:X,label:"".concat(e),style:{color:T===e?"white":"grey",background:T===e?"#175676":"lightgrey"},onClick:function(){M.m((function(){t.changeModelLr(e),t.reset(a)}))}},n)}))]}),Object(B.jsxs)(y.a,{children:[Object(B.jsx)(S.a,{variant:"caption",children:"Data Set"}),Z.map((function(e,r){return Object(B.jsx)(C.a,{disabled:X,label:e.label,style:{color:j===e.label?"white":"grey",background:j===e.label?"#175676":"lightgrey"},onClick:function(){t.setState({shape:n,curve:e.label}),t.reset(a),M.m((function(){t.genTensorData(e.eqn,e.scale)}))}},r)}))]}),Object(B.jsxs)(y.a,{children:[Object(B.jsx)(S.a,{variant:"caption",children:"Neurons"}),Object(B.jsx)(z.a,{style:{color:"#175676"},defaultValue:4,disabled:X,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,onChange:function(e,n){t.setState({sliderVal:n})},min:1,max:8}),Object(B.jsx)(m.a,{disabled:X,onClick:function(){var e=n;console.log(e.length),e.length<5&&(e[e.length-1]=t.state.sliderVal,e.push(1),t.setState({shape:e}),t.initNeuralNetwork(e),t.reset(a))},children:"+"}),Object(B.jsx)(m.a,{disabled:X,onClick:function(){var e=n;console.log(e.length),e.length>2&&(e.splice(e.length-2,1),t.setState({shape:e}),t.initNeuralNetwork(e),t.reset(a))},children:"\u2013"})]})]})})})]}),nt=Object(B.jsxs)(O.a,{marginLeft:10,children:[Object(B.jsx)(O.a,{children:Object(B.jsx)(W,{width:300,height:300,padding:0,start:-a,stop:a,X:Y,y:G,yhat:c})}),Object(B.jsx)(O.a,{marginTop:10,children:Object(B.jsx)(R,{lossArray:this.state.lossArray,loss:I})})]});return Object(B.jsxs)("div",{id:"app",children:[Object(B.jsx)(F.a,{position:"static",style:{background:"#175676",color:"white"},children:Object(B.jsx)(D.a,{children:Object(B.jsx)(S.a,{variant:"h6",children:"Backpropagation Visualizer"})})}),Object(B.jsxs)(O.a,{display:"flex",justifyContent:"center",marginTop:10,children:[et,Object(B.jsx)(O.a,{marginLeft:10,children:Object(B.jsx)("div",{className:"regular",children:Object(B.jsx)(E,{trans:r,input:Y[0],label:G[0],shapedWeights:s,shape:n,biases:i,weights:f,rects:l,links:p,playing:X?0===J?"edgeForward":"edgeSlowed":"edgePaused",show:X,nshow:this.state.nshow,bshow:this.state.bshow,microShow:this.state.microShow,mode:x,backward:this.state.direction,onClick:function(){t.asyncPause()}})})}),nt]})]})}}]),n}(r.Component),_=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,513)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,s=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),s(t),i(t)}))};c.a.render(Object(B.jsx)(s.a.StrictMode,{children:Object(B.jsx)($,{})}),document.getElementById("root")),_()}},[[481,1,2]]]);
//# sourceMappingURL=main.d6e86902.chunk.js.map