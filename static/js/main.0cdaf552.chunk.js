(this["webpackJsonpBackpropagation-Visualizer"]=this["webpackJsonpBackpropagation-Visualizer"]||[]).push([[0],{175:function(e,t,a){},484:function(e,t){},485:function(e,t){},493:function(e,t){},496:function(e,t){},497:function(e,t){},501:function(e,t,a){},502:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"formatWeightArray",(function(){return ie})),a.d(n,"toFunc2DArray",(function(){return ce})),a.d(n,"flatten",(function(){return oe})),a.d(n,"getRandomInt",(function(){return le})),a.d(n,"tensorToArray",(function(){return he}));var r={};a.r(r),a.d(r,"generateLinearScale",(function(){return ue})),a.d(r,"generateLink",(function(){return de})),a.d(r,"generateNeuronPlacement",(function(){return pe})),a.d(r,"generateLinksPlacement",(function(){return je}));var s=a(9),i=a.n(s),c=a(63),o=a.n(c),l=a(4),h=a(10),u=a(14),d=a(15),p=a(49),j=(a(175),a(13));var b=function(){var e=100;return Object(j.jsx)("div",{children:Object(j.jsxs)("svg",{width:e,height:10,className:"grad",overflow:"visible",children:[Object(j.jsx)("text",{fill:"grey",fontFamily:"sans-serif",fontSize:"10px",x:0,y:-13,children:"Color and stroke"}),Object(j.jsx)("text",{fill:"grey",fontFamily:"sans-serif",fontSize:"10px",x:0,y:-4,children:"indicate weight"}),Object(j.jsx)("text",{fontSize:"12px",fill:"grey",x:-.5,y:18,children:"|"}),Object(j.jsx)("text",{fontSize:"13px",fill:"grey",x:-2.5,y:28,children:"\u2013"}),Object(j.jsx)("text",{fontSize:"12px",fill:"grey",x:48,y:18,children:"|"}),Object(j.jsx)("text",{fontSize:"13px",fill:"grey",x:45.5,y:30,children:"0"}),Object(j.jsx)("text",{fontSize:"12px",fill:"grey",x:98,y:18,children:"|"}),Object(j.jsx)("text",{fontSize:"13px",fill:"grey",x:95.5,y:28,children:"+"})]})})},f=function(e){var t=e.source,a=e.target,n=e.color,r=e.isAnimating;return Object(j.jsxs)("g",{children:[Object(j.jsx)("defs",{children:Object(j.jsx)("marker",{id:"head",orient:"auto",markerWidth:"3",markerHeight:"4",refX:"0.1",refY:"2",children:Object(j.jsx)("path",{d:"M0,0 V4 L2,2 Z",fill:n})})}),Object(j.jsx)("path",{className:r?"absorb":"arrow",id:"arrow-line",markerEnd:"url(#head)",fill:"none",stroke:n,d:"M".concat(t.x,",").concat(t.y,", ").concat(a.x,", ").concat(a.y)})]})},g=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"flatten",value:function(e){for(var t=[],a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++)t.push(e[a][n]);return t}},{key:"isEmpty",value:function(e){return 0===e.length}},{key:"isUndefined",value:function(e){return"undefined"===typeof e}},{key:"isUndefined3d",value:function(e,t,a,n){return this.isUndefined(e[t])||this.isUndefined(e[t][a])||this.isUndefined(e[t][a][n])}},{key:"render",value:function(){var e=this,t=this.props,a=t.playing,n=t.mode,r=t.shapedLinks,s=t.shapedWeights,i=t.shapedRects,c=t.miniNN,o=t.subEpoch,l=t.keyFrameLoss,h=t.keyFrameLayer,u=(t.input,t.label,t.children,p.f().x((function(e){return e.x})).y((function(e){return e.y}))),d="black",g=32,m=function(e,t,a,n,r){var s=n?-a:a;return Object(j.jsx)(f,{source:{x:e,y:t},target:{x:e,y:t+s},color:r,isAnimating:"transition"===o})},x=Object(j.jsx)("svg",{id:"p",width:"810",height:"500",overflow:"visible",children:Object(j.jsxs)("g",{id:"ee",children:[Object(j.jsx)("path",{d:"M 750, 234 L 750, 300",stroke:2===l||1===l?"orange":d,className:n&&l>0?1===l?"edgeForward":2===l?"edgeBackward":"edgePaused":a}),Object(j.jsx)("path",{d:u({source:{x:766,y:315},target:{x:890,y:430}}),stroke:d,fill:"none",className:a}),Object(j.jsx)("path",{d:u({source:{x:766,y:250},target:{x:890,y:150}}),stroke:d,fill:"none",className:a}),r.map((function(t,r){return t.map((function(t,i){var l="edgePaused",u="orange",d=!1;return n&&"forward"===o&&r===h?(l="edgeForward",d=!0,u="orange"):n&&"backward"===o&&r===h&&(l="edgeBackward",d=!0),t.map((function(t,h){var b=e.isUndefined3d(s,r,i,h),f=b?[]:s[r][i][h],g=b?1:2*Math.abs(f)+.1,m=b?"lightgrey":f>0?"#4BA3C3":"#D62839";if(n&&"update"===o&&!0===e.props.isAnimating){var x=2*c.model[r][i].dWeights[h],y=.01*x;p.k("#nn").select("#p").select("#ee").select("#cpath".concat(r).concat(i).concat(h)).transition().duration(750).ease(p.c).attr("stroke-width",g-x).transition().duration(750).ease(p.d).attr("stroke-width",g-y)}return Object(j.jsx)("path",{id:"cpath".concat(r).concat(i).concat(h),d:t,className:n?l:a,strokeWidth:g,stroke:d?u:m,fill:"none"},h)}))}))})),Object(j.jsx)("rect",{x:34,y:234,width:g,height:g,fill:"darkgrey"}),i.map((function(t,a){return t.map((function(t,r){var s=!1,i="backward"===o||"transition"===o;return(n&&a<=h||i||"update"===o)&&(s=!0),Object(j.jsxs)("g",{children:[Object(j.jsx)("rect",{x:t.x,y:t.y,width:g,height:g,fill:p.i(104,104,104).brighter(s?c.model[a][r].actStep+e.props.lr:1),stroke:"black",strokeWidth:2,className:"bar"}),null!==c&&n&&i&&a>=h-1?m(t.x+16,t.y+16,Math.abs(c.model[a][r].dActStep),c.model[a][r].dActStep<0,"orange"):""]})}))})),Object(j.jsx)("rect",{x:734,y:300,width:g,height:g,fill:"none",stroke:"black"}),Object(j.jsx)("text",{fontFamily:"sans-serif",fontSize:"12px",x:739,y:318,children:"loss"})]})});return Object(j.jsxs)("div",{id:"nn",children:[x,Object(j.jsx)(b,{})]})}}]),a}(s.Component),m=a(3),x=a.n(m),y=a(12),v=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"plotPoints",value:function(e,t){e.selectAll("circle").data(t).enter().append("circle").attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).attr("r",2).style("fill","grey")}},{key:"componentDidMount",value:function(){var e=Object(y.a)(x.a.mark((function e(){var t,a,n,r,s,i,c,o,l,h,u,d;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,a=t.width,n=t.height,r=t.padding,s=t.start,i=t.stop,c=p.k("#nice"),(o=c.append("svg").attr("width",a).attr("height",n).style("overflow","visible")).append("rect").attr("width",a).attr("height",n).attr("class","cord"),l=p.j().domain([s,i]).range([0,a-2*r]),h=p.j().domain([s,i]).range([n-2*r,0]),u=p.a().scale(l),d=p.b().scale(h),o.append("g").attr("class","axis").attr("transform","translate(0,".concat(n-2*r,")")).call(u),o.append("g").attr("class","axis").attr("transform","translate("+(a-2*r)+",0)").call(d),o.append("line").attr("x1",0).attr("y1",(n+1)/2).attr("x2",a).attr("y2",(n+1)/2).attr("class","split"),o.append("line").attr("x1",(a+1)/2).attr("y1",0).attr("x2",(a+1)/2).attr("y2",n).attr("class","split"),o.append("path").attr("id","epic").attr("stroke","none").attr("fill","none");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){for(var e=this.props,t=e.width,a=e.height,n=e.padding,r=e.start,s=e.stop,i=e.X,c=e.y,o=e.yhat,l=p.j().domain([r,s]).range([0,t-2*n]),h=p.j().domain([r,s]).range([a-2*n,0]),u=p.k("#nice").select("svg"),d=[],j=0;j<i.length;j++)d.push({x:l(i[j]),y:h(c[j])});for(var b=[],f=0;f<i.length;f++)b.push([l(i[f]),h(o[f])]);u.selectAll("circle").remove(),this.plotPoints(u,d),u.select("#epic").attr("d",p.e()(b)).attr("stroke","black").attr("fill","none")}},{key:"render",value:function(){return Object(j.jsx)("div",{id:"nice"})}}]),a}(s.Component),O=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=p.k("#sweet"),t=100,a=300,n=p.j().domain([0,-1]).range([0,300]),r=p.j().domain([1,1]).range([100,0]),s=e.append("svg").attr("width",a).attr("height",t).style("overflow","visible");s.append("rect").attr("width",a).attr("height",t).attr("class","cord");var i=p.a().scale(n),c=p.b().scale(r);s.append("g").attr("class","axis").attr("id","x").attr("transform","translate(0,".concat(100,")")).call(i),s.append("g").attr("class","axis").attr("id","y").attr("transform","translate(300,0)").call(c.ticks(0)),s.append("path").attr("id","line").attr("stroke","none").attr("fill","none")}},{key:"componentDidUpdate",value:function(){for(var e=this.props,t=e.lossArray,a=(e.loss,t.length-1),n=p.j().domain([0,a]).range([1,300]),r=p.h(t),s=p.g(t),i=p.j().domain([r,s]).range([100,0]),c=p.k("#sweet").select("svg"),o=[],l=0;l<t.length;l++)o.push([n(l),i(t[l])]);var h=p.a().scale(n),u=p.b().scale(i);c.select("#x").attr("transform","translate(0,".concat(100,")")).call(h.ticks(5)),c.select("#y").attr("transform","translate(300,0)").call(u.ticks(5)),c.select("#line").attr("d",p.e()(o)).attr("stroke","black").attr("fill","none")}},{key:"render",value:function(){return Object(j.jsx)("div",{id:"sweet"})}}]),a}(s.Component),k=a(43),w=a(539),S=a(519),C=a(521),N=a(542),L=a(522),F=(s.Component,a(523)),A=a(524),P=(s.Component,a(525)),E=a(526),z=function(e){var t=e.title;return Object(j.jsx)(P.a,{position:"fixed",variant:"outlined",style:{background:"#175676",color:"white"},children:Object(j.jsx)(E.a,{children:Object(j.jsx)(L.a,{variant:"h6",children:t})})})},D=a(67),T=a(21),B=a(103),M=a(46),W=a(331),I=a.n(W),H=a(527),R=a(541),U=a(531),q=a(543),V=a(540),X=a(535),G=a(537),Y=a(528),J=a(529),Z=a(532),K=a(533),Q=a(534),$=a(536),_=a.p+"static/media/controlcenter.3793afef.gif",ee=a.p+"static/media/customization.05bd2f71.gif",te=a.p+"static/media/nn.984f5d8c.png",ae=a.p+"static/media/scatter.1bf50e5e.gif",ne=function(){function e(t,a){Object(l.a)(this,e),this.weights=t,this.bias=a}return Object(h.a)(e,[{key:"mult",value:function(e,t){return e.map((function(e,a){return e*t[a]}))}},{key:"dMult",value:function(e,t){return this.mult(e,t)}},{key:"sum",value:function(e){return e.reduce((function(e,t){return e+t}))}},{key:"dSum",value:function(e,t){for(var a=[],n=0;n<t;n++)a.push(e);return a}},{key:"linear",value:function(e){return e}},{key:"forward",value:function(e,t){var a=this.weights,n=this.bias,r=this.mult,s=this.sum,i=r(e,a),c=s(i)+n,o=t(c);this.inputs=e,this.multStep=i,this.sumStep=c,this.actStep=o,this.output=o}},{key:"backward",value:function(e,t){var a=this.inputs,n=this.weights,r=this.actStep,s=this.dSum,i=this.mult,c=this.sum,o=t(r)*e,l=s(o,a.length),h=o,u=i(l,a),d=i(l,n),p=c(d);this.dvalue=e,this.dActStep=o,this.dSumStep=l,this.dBias=h,this.dWeights=u,this.dInputs=d,this.dInputsSum=p}}]),e}(),re=function(){function e(){Object(l.a)(this,e)}return Object(h.a)(e,[{key:"forward",value:function(e,t){var a=e-t,n=this.output=Math.pow(e-t,2);this.subStep=a,this.squareStep=n,this.output=n}},{key:"backward",value:function(){this.dInputs=2*this.subStep}}]),e}(),se=function(){function e(t,a,n){Object(l.a)(this,e),this.model=[],this.loss=new re,this.shape=t;for(var r=0;r<a.length;r++){for(var s=[],i=0;i<a[r].length;i++)s.push(new ne(a[r][i],n[r][i]));this.model.push(s)}}return Object(h.a)(e,[{key:"sum",value:function(e){return e.reduce((function(e,t){return e+t}))}},{key:"add",value:function(e,t){var a=e.length,n=t.length;if(n!=a)return console.error("".concat(a," does not match ").concat(n,", so returned empty array")),[];for(var r=new Array(a),s=0;s<e.length;s++)r[s]=e[s]+t[s];return r}},{key:"zeros",value:function(e){for(var t=new Array(e),a=0;a<e;a++)t[a]=0;return t}},{key:"dReLU",value:function(e){return e>0?1:0}},{key:"dLinear",value:function(e){return 1}},{key:"ReLU",value:function(e){return Math.max(0,e)}},{key:"linear",value:function(e){return e}},{key:"forward",value:function(e,t){for(var a=[e],n=this.model.length,r=0;r<n-1;r++){for(var s=[],i=0;i<this.model[r].length;i++)this.model[r][i].forward(a,this.ReLU),s.push(this.model[r][i].output);a=s}this.model[n-1][0].forward(a,this.linear),this.yhat=this.model[n-1][0].output,this.loss.forward(this.yhat,t)}},{key:"backward",value:function(){this.sum;var e=this.add,t=this.zeros;this.loss.backward();var a=[this.loss.dInputs],n=this.model.length;this.model[n-1][0].backward(a[0],this.dLinear),a=this.model[n-1][0].dInputs;for(var r=n-2;r>=0;r--){for(var s=t(this.model[r][0].inputs.length),i=0;i<this.model[r].length;i++)this.model[r][i].backward(a[i],this.dReLU),s=e(s,this.model[r][i].dInputs);a=s}}},{key:"update",value:function(e){for(var t=function(e,t,a){return e-t*a},a=0;a<this.model.length;a++)for(var n=0;n<this.model[a].length;n++)for(var r=0;r<this.model[a][n].dWeights.length;r++){var s=t(this.model[a][n].weights[r],e,this.model[a][n].dWeights[r]),i=t(this.model[a][n].bias,e,this.model[a][n].dBias);this.model[a][n].weights[r]=s,this.model[a][n].bias=i}}},{key:"throttleForward",value:function(e,t,a,n){var r=this.model[t][e].output+a;this.model[t][e].output=r;for(var s=[],i=0;i<this.model[t].length;i++)s.push(this.model[t][i].output);for(var c=this.model.length,o=t+1;o<c-1;o++){for(var l=[],h=0;h<this.model[o].length;h++)this.model[o][h].forward(s,this.ReLU),l.push(this.model[o][h].output);s=l}this.model[c-1][0].forward(s,this.linear),this.yhat=this.model[c-1][0].output,this.loss.forward(this.yhat,n)}}]),e}();function ie(e,t){for(var a=[],n=0;n<e.length;n++){for(var r=t[n+1],s=[],i=0;i<r;i++){for(var c=[],o=i;o<e[n].length;o+=r)c.push(e[n][o]);s.push(c)}a.push(s)}return a}function ce(e,t){for(var a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++)e[a][n]=+e[a][n].toFixed(t);return e}function oe(e){for(var t=[],a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++)t.push(e[a][n]);return t}function le(e){return Math.floor(Math.random()*Math.floor(e))}function he(e){return Array.from(e.dataSync())}function ue(e,t){return{xScale:p.j().domain(e.domain).range(e.range),yScale:p.j().domain(t.domain).range(t.range)}}function de(e){return p.f().x((function(t){return t.x+e})).y((function(t){return t.y+e}))}function pe(e,t,a,n,r,s,i){var c=[],o=[];c.push([n]),o.push(n);for(var l=1;l<e.length-1;l++){for(var h=[],u=0;u<e[l];u++){var d={x:s(t[l])-a/2,y:i(92-12*u)-a/2};h.push(d),o.push(d)}c.push(h)}return o.push(r),c.push([r]),{flattenedNeurons:o,shapedNeurons:c}}function je(e,t,a){for(var n=[],r=[],s=[],i=1;i<e.length;i++){s=[];for(var c=0;c<e[i];c++){n=[];for(var o=0;o<e[i-1];o++)n.push(a({source:t[i-1][o],target:t[i][c]}));s.push(n)}r.push(s)}return r}var be=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={tensorFlowNN:null,miniNN:null,X:[],y:[],yhat:[],shape:[1,8,8,1],lr:.01,epoch:0,biasesData:[],weightsData:[],lossArray:[],loss:null,scale:5,rects:[],weights:[],shapedWeights:[],shapedRects:[],shapedLinks:[],direction:"edgePaused",curve:"sin",controls:{playing:!1,speed:0},sliderVal:2,mode:!1,stopRender:!1,keyFrameLayer:0,keyFrameLoss:0,subEpoch:"",isAnimating:!1,lossSavings:0,singleInputExample:0,singleLabelExample:0,newOutput:0,controlCenterHelp:!1,customizationHelp:!1,neuralNetworkHelp:!1,scatterHelp:!1,lossHelp:!1,lossChange:0},n.initNeuralNetwork=n.initNeuralNetwork.bind(Object(k.a)(n)),n.run=n.run.bind(Object(k.a)(n)),n.genTensorData=n.genTensorData.bind(Object(k.a)(n)),n.mutate=n.mutate.bind(Object(k.a)(n)),n.train=n.train.bind(Object(k.a)(n)),n.printParameters=n.printParameters.bind(Object(k.a)(n)),n.reset=n.reset.bind(Object(k.a)(n)),n.resetParameters=n.resetParameters.bind(Object(k.a)(n)),n.asyncPause=n.asyncPause.bind(Object(k.a)(n)),n.changeModelLr=n.changeModelLr.bind(Object(k.a)(n)),n.anim=n.anim.bind(Object(k.a)(n)),n.randomInputGeneration=n.randomInputGeneration.bind(Object(k.a)(n)),n}return Object(h.a)(a,[{key:"randomInputGeneration",value:function(e,t,a,r,s,i,c){var o=n.getRandomInt(50),l=e[o],h=t[o],u=n.formatWeightArray(a,s),d=new se(s,u,r),p=new se(s,u,r);d.forward(l,h),d.backward(),p.forward(l,h),p.backward(),p.update(i),p.forward(l,h);var j=p.yhat,b=p.loss.output;this.setState(Object(B.a)(Object(B.a)({},this.state),{},{miniNN:d,mode:!0,lossSavings:b,singleInputExample:l,singleLabelExample:h,newOutput:j,controls:Object(B.a)(Object(B.a)({},this.state.controls),{},{playing:!1})}))}},{key:"anim",value:function(){var e=Object(y.a)(x.a.mark((function e(){var t,a,n,r,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.shape,a=750,n=function(e){return new Promise((function(t){return setTimeout(t,e)}))},this.setState({subEpoch:"forward",isAnimating:!0,lossChange:0}),r=0;case 5:if(!(r<t.length)){e.next=14;break}if(this.setState({keyFrameLayer:r}),r!==t.length-1){e.next=9;break}return e.abrupt("continue",11);case 9:return e.next=11,n(a);case 11:r++,e.next=5;break;case 14:return this.setState({keyFrameLoss:1}),e.next=17,n(a);case 17:return this.setState({keyFrameLoss:2}),e.next=20,n(a);case 20:this.setState({keyFrameLoss:3}),this.setState({lossChange:this.state.miniNN.loss.output}),this.setState({subEpoch:"backward"}),s=t.length-1;case 24:if(!(s>=0)){e.next=31;break}return this.setState({keyFrameLayer:s}),e.next=28,n(a);case 28:s--,e.next=24;break;case 31:return this.setState({keyFrameLayer:-1}),e.next=34,n(a);case 34:return this.setState({subEpoch:"transition"}),e.next=37,n(1e3);case 37:return this.setState({subEpoch:"update"}),e.next=40,n(1e3);case 40:this.setState({isAnimating:!1,lossChange:this.state.lossSavings});case 41:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initNeuralNetwork",value:function(e){var t=this.state.controls.playing;if(t){if(t){var a=this.state,s=a.weightsData,i=a.shape,c=n.flatten(s),o=n.formatWeightArray(s,i);this.setState({weights:c,shapedWeights:o})}}else{var l=32,h=r.generateLinearScale({domain:[0,100],range:[50,750]},{domain:[0,100],range:[500,0]}),u=h.xScale,d=h.yScale,p={x:34,y:234},j={x:734,y:234},b=r.generateLink(16),f=r.generateNeuronPlacement(e,[0,25,50,75,0],l,p,j,u,d),g=f.flattenedNeurons,m=f.shapedNeurons,x=r.generateLinksPlacement(e,m,b);m.splice(0,1),this.setState({shapedLinks:x,rects:g,shapedRects:m})}}},{key:"changeModelLr",value:function(e){var t=this;M.m((function(){t.setState({lr:e})}))}},{key:"run",value:function(){var e=Object(y.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!this.state.controls.playing,this.mutate("controls","playing",t),!0!==t){e.next=5;break}return e.next=5,this.train(this.state.X,this.state.y);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mutate",value:function(e,t,a){var n=this;M.m((function(){var r=Object(B.a)({},n.state);e in r&&t in r[e]?(r[e][t]=a,n.setState({state:r})):console.error("Could not be found in state")}))}},{key:"addModel",value:function(e){var t=this;return M.m((function(){var a=t.state.shape;e.add(M.c.dense({inputShape:[1],units:a[1],activation:"relu",useBias:!0}));for(var n=2;n<a.length-1;n++)e.add(M.c.dense({units:a[n],activation:"relu",useBias:!0}));return e.add(M.c.dense({units:1,activation:"linear",useBias:!0})),e}))}},{key:"modelCompile",value:function(e){var t=M.h();return this.addModel(t),t.compile({optimizer:M.n.sgd(e),loss:"meanSquaredError"}),t}},{key:"train",value:function(){var e=Object(y.a)(x.a.mark((function e(t,a){var r,s,i,c,o,l,h,u,d=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=M.m((function(){return M.l(t)})),s=M.m((function(){return M.l(a)})),i=M.m((function(){return d.state.tensorFlowNN})),c=function(e){return new Promise((function(t){return setTimeout(t,e)}))},o=this.state.controls.playing;case 5:if(!1===o){e.next=17;break}return this.setState({stopRender:!0}),l=this.state.controls,h=l.playing,u=l.speed,o=h,e.next=11,i.fit(r,s,{epochs:1});case 11:return M.m((function(){var e=i.predict(r),t=n.tensorToArray(e),s=M.e.meanSquaredError(a,t).dataSync()[0];d.printParameters(i,s,t,d.state.epoch+1)})),this.setState({stopRender:!1}),e.next=15,c(u);case 15:e.next=5;break;case 17:this.setState({tensorFlowNN:i}),M.b(r),M.b(s);case 20:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"genTensorData",value:function(){var e=Object(y.a)(x.a.mark((function e(t,a,r){var s=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.g();case 2:M.m((function(){var e=M.d(-s.state.scale,s.state.scale,r),i=M.f(t(e),a),c=M.o(e),o=n.tensorToArray(e),l=n.tensorToArray(i),h=n.tensorToArray(c);s.setState({X:o,y:l,yhat:h})}));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"printParameters",value:function(e,t,a,n){for(var r=[],s=[],i=0;i<e.getWeights().length;i++)(i%2===0?r:s).push(Array.from(e.getWeights()[i].dataSync()));var c=[].concat(Object(T.a)(this.state.lossArray),[t]);this.setState({biasesData:s,weightsData:r,loss:t,yhat:a,epoch:n,lossArray:c}),this.initNeuralNetwork(this.state.shape)}},{key:"asyncPause",value:function(){var e=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({controls:Object(B.a)(Object(B.a)({},this.state.controls),{},{playing:!1})});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetParameters",value:function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n,r,s=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.b(this.state.tensorFlowNN),a=this.state.curve,M.m((function(){"sin"===a?n=M.j:"tanh"===a?n=M.k:"cos"===a&&(n=M.a)})),e.next=5,this.genTensorData(n,t,50);case 5:r=M.m((function(){return s.modelCompile(s.state.lr)})),this.setState({epoch:0,loss:null,weights:[],miniNN:null,tensorFlowNN:r,shapedWeights:[],lossArray:[]}),M.b(undefined);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reset",value:function(){var e=Object(y.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.asyncPause(),this.resetParameters(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(y.a)(x.a.mark((function e(){var t,a=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M.i("cpu"),this.genTensorData(M.j,this.state.scale,50),this.initNeuralNetwork(this.state.shape),t=M.m((function(){return a.modelCompile(.01)})),this.setState({tensorFlowNN:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(){return!this.state.stopRender}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.X,r=a.y,s=a.shape,i=a.scale,c=a.miniNN,o=a.weightsData,l=a.biasesData,h=a.yhat,u=a.rects,d=a.weights,p=a.mode,b=a.epoch,f=a.curve,m=a.lr,k=a.loss,P=a.controls,E=a.shapedWeights,z=a.shapedLinks,T=a.shapedRects,W=a.keyFrameLayer,ne=a.keyFrameLoss,re=a.subEpoch,se=a.isAnimating,ie=a.singleInputExample,ce=a.singleLabelExample,oe=a.lossSavings,le=a.controlCenterHelp,he=a.customizationHelp,ue=a.neuralNetworkHelp,de=a.lossChange,pe=a.scatterHelp,je=P.playing,be=P.speed,fe=[{label:"sin",eqn:M.j,scale:5},{label:"cos",eqn:M.a,scale:5},{label:"tanh",eqn:M.k,scale:5}],ge=Object(j.jsx)(H.a,{style:{background:this.state.controls.playing?"#D62839":"#175676",color:"white"},disableTouchRipple:!0,onClick:function(){return t.run()},children:je?Object(j.jsx)(J.a,{}):Object(j.jsx)(Y.a,{})}),me=Object(j.jsxs)(F.a,{children:[Object(j.jsx)(R.a,{title:"reset",arrow:!0,children:Object(j.jsx)(U.a,{disabled:je,onClick:function(){t.reset(i)},children:Object(j.jsx)(Z.a,{})})}),ge,Object(j.jsx)(R.a,{title:"slomo",arrow:!0,children:Object(j.jsx)(U.a,{style:{color:0===be?"grey":"#FFC006"},onClick:function(){t.setState({controls:Object(B.a)(Object(B.a)({},P),{},{speed:0===be?100:0})})},children:Object(j.jsx)(K.a,{})})})]}),xe=Object(j.jsxs)(w.a,{children:[Object(j.jsxs)(F.a,{children:["Phase:",Object(j.jsx)(A.a,{disabled:!0,style:{color:"forward"===re?"orange":"grey"},children:"Forward"}),Object(j.jsx)(A.a,{disabled:!0,style:{color:"backward"===re?"orange":"grey"},children:"Backward"}),Object(j.jsx)(A.a,(e={disabled:!0},Object(D.a)(e,"disabled",!0),Object(D.a)(e,"style",{color:"update"===re?"orange":"grey"}),Object(D.a)(e,"children","Update"),e))]}),Object(j.jsxs)(F.a,{children:[Object(j.jsx)(A.a,{onClick:Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.anim();case 2:case"end":return e.stop()}}),e)}))),disabled:se,style:{color:se?"lightgrey":"black"},variant:"outlined",children:"REPLAY"}),Object(j.jsx)(A.a,{onClick:Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.randomInputGeneration(n,r,o,l,s,1e-4,p),e.next=3,t.anim();case 3:case"end":return e.stop()}}),e)}))),style:{color:se?"lightgrey":"black"},disabled:se,variant:"outlined",children:"New Training Example"})]})]}),ye=Object(j.jsxs)(w.a,{width:400,children:[Object(j.jsx)(S.a,{variant:"outlined",children:Object(j.jsxs)(C.a,{children:[Object(j.jsxs)(L.a,{variant:"caption",style:{color:"#4BA3C3"},children:["Control Center",Object(j.jsx)(U.a,{size:"small",style:{color:"orange"},onClick:function(){t.setState({controlCenterHelp:!0})},children:Object(j.jsx)(Q.a,{})})]}),Object(j.jsx)("div",{}),Object(j.jsx)(R.a,{title:Object(j.jsx)(L.a,{variant:"h6",children:p?"Click to go back":"Click to see Backpropagation"}),arrow:!0,placement:"right-start",open:je||p&&!se,children:Object(j.jsx)(A.a,{disabled:null==k||se,onClick:Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=5;break}t.setState({subEpoch:""}),t.setState({mode:!p}),e.next=8;break;case 5:return t.randomInputGeneration(n,r,o,l,s,1e-4,p),e.next=8,t.anim();case 8:case"end":return e.stop()}}),e)}))),children:Object(j.jsxs)(L.a,{variant:"h4",children:["Epoch: ",b]})})}),Object(j.jsxs)(L.a,{variant:"h5",children:[p&&0!=de?"loss: ":"",p&&0!=de?Object(j.jsx)(I.a,{value:de,formatValue:function(e){return e.toPrecision(6)},duration:750}):""]}),Object(j.jsx)(L.a,{variant:"h6",children:null==k||p?"":"Loss: ".concat(k.toPrecision(6))}),Object(j.jsx)(L.a,{variant:"h6",children:p?"Input: ".concat(ie.toPrecision(6),", Label: ").concat(ce.toPrecision(6)):""}),p?xe:me,Object(j.jsx)(F.a,{})]})}),Object(j.jsx)(w.a,{marginTop:5,children:Object(j.jsx)(S.a,{variant:"outlined",children:Object(j.jsxs)(C.a,{children:[Object(j.jsxs)(L.a,{variant:"caption",style:{color:"#4BA3C3"},children:["Customization ",Object(j.jsx)(U.a,{size:"small",style:{color:"orange"},onClick:function(){t.setState({customizationHelp:!0})},children:Object(j.jsx)(Q.a,{})})]}),Object(j.jsxs)(F.a,{children:[Object(j.jsx)(L.a,{variant:"caption",children:"Learning Rate"}),[.001,.005,.01,.05,.1].map((function(e,a){return Object(j.jsx)(q.a,{disabled:je||p,label:"".concat(e),style:{color:m===e?"white":"grey",background:m===e?"#175676":"lightgrey"},onClick:function(){M.m((function(){t.changeModelLr(e),t.reset(i)}))}},a)}))]}),Object(j.jsxs)(F.a,{children:[Object(j.jsx)(L.a,{variant:"caption",children:"Data Set"}),fe.map((function(e,a){return Object(j.jsx)(q.a,{disabled:je||p,label:e.label,style:{color:f===e.label?"white":"grey",background:f===e.label?"#175676":"lightgrey"},onClick:function(){t.setState({shape:s,curve:e.label}),t.reset(i),M.m((function(){t.genTensorData(e.eqn,e.scale,50)}))}},a)}))]}),Object(j.jsxs)(F.a,{children:[Object(j.jsx)(L.a,{variant:"caption",children:"Neurons"}),Object(j.jsx)(N.a,{style:{color:"#175676"},defaultValue:2,disabled:je||p,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,onChange:function(e,a){t.setState({sliderVal:a})},min:1,max:8}),Object(j.jsx)(A.a,{disabled:je||p,onClick:function(){var e=s;e.length<5&&(e[e.length-1]=t.state.sliderVal,e.push(1),t.setState({shape:e}),t.initNeuralNetwork(e),t.reset(i))},children:"+"}),Object(j.jsx)(A.a,{disabled:je||p,onClick:function(){var e=s;e.length>2&&(e.splice(e.length-2,1),t.setState({shape:e}),t.initNeuralNetwork(e),t.reset(i))},children:"\u2013"})]})]})})})]}),ve=Object(j.jsxs)(w.a,{marginLeft:10,children:[Object(j.jsxs)(w.a,{children:[Object(j.jsx)(v,{width:300,height:300,padding:0,start:-i,stop:i,X:n,y:r,yhat:h}),Object(j.jsx)(U.a,{size:"small",style:{color:"orange",position:"relative",bottom:"300px",right:"40px"},onClick:function(){t.setState({scatterHelp:!0})},children:Object(j.jsx)(Q.a,{})})]}),Object(j.jsx)(w.a,{marginTop:10,children:Object(j.jsx)(O,{lossArray:this.state.lossArray,loss:k})})]}),Oe=Object(j.jsxs)(w.a,{marginLeft:10,children:[Object(j.jsx)(g,{miniNN:c,input:ie,label:ce,shapedWeights:E,shapedLinks:z,shapedRects:T,shape:s,biases:l,weights:d,rects:u,playing:je?0===be?"edgeForward":"edgeSlowed":"edgePaused",show:je,mode:p,backward:this.state.direction,keyFrameLayer:W,keyFrameLoss:ne,subEpoch:re,lossSavings:oe,isAnimating:se,lr:m}),Object(j.jsx)(U.a,{size:"small",style:{color:"orange",position:"relative",bottom:"500px",left:"100px"},onClick:function(){t.setState({neuralNetworkHelp:!0})},children:Object(j.jsx)(Q.a,{})})]});return Object(j.jsxs)("div",{id:"app",children:[Object(j.jsx)(S.a,{variant:"outlined",style:{background:"#FAFAFA",outlineColor:"white",paddingBottom:"1em"},children:Object(j.jsx)(C.a,{children:Object(j.jsxs)(w.a,{className:"regular",display:"flex",justifyContent:"center",marginTop:10,children:[ye,Oe,ve]})})}),Object(j.jsxs)(V.a,{PaperProps:{style:{backgroundColor:"#F7F7F7"}},open:le,children:[Object(j.jsx)(X.a,{children:Object(j.jsx)(U.a,{onClick:function(){t.setState({controlCenterHelp:!1})},children:Object(j.jsx)($.a,{})})}),Object(j.jsxs)(G.a,{children:[Object(j.jsx)("img",{src:_,alt:"how to use control center",width:"100%"}),Object(j.jsxs)(L.a,{variant:"caption",children:["The ",Object(j.jsx)("em",{children:"control"})," center is where you"," ",Object(j.jsx)("em",{children:"control"})," the flow of the program. You can play, pause, slow down and reset."]}),Object(j.jsx)(w.a,{display:"flex",justifyContent:"center",children:Object(j.jsxs)(w.a,{marginBottom:5,children:[Object(j.jsx)(L.a,{variant:"h6",children:"What is an Epoch?"}),Object(j.jsx)(L.a,{variant:"body2",children:"An epoch is single iteration of training."}),Object(j.jsx)(L.a,{variant:"h6",children:"What is Loss?"}),Object(j.jsx)(L.a,{variant:"body2",children:"Loss tells you the error of the current predicitions. Lower is better."}),Object(j.jsx)(L.a,{variant:"h6",children:"How Do I go into Backpropogation Mode?"}),Object(j.jsx)(L.a,{variant:"body2",children:"Click on the EPOCH"})]})})]})]}),Object(j.jsxs)(V.a,{PaperProps:{style:{backgroundColor:"#F7F7F7"}},open:he,children:[Object(j.jsx)(X.a,{children:Object(j.jsx)(U.a,{onClick:function(){t.setState({customizationHelp:!1})},children:Object(j.jsx)($.a,{})})}),Object(j.jsxs)(G.a,{children:[Object(j.jsx)("img",{src:ee,alt:"how to use control center",width:"100%"}),Object(j.jsxs)(L.a,{variant:"caption",children:["The ",Object(j.jsx)("em",{children:"customization"})," is where you"," ",Object(j.jsx)("em",{children:"customize"})," data, learning rate, and model shape."]}),Object(j.jsx)(w.a,{display:"flex",justifyContent:"center",children:Object(j.jsxs)(w.a,{marginBottom:5,children:[Object(j.jsx)(L.a,{variant:"h6",children:"What is an Learning Rate?"}),Object(j.jsx)(L.a,{variant:"body2",children:"Learning rate roughly translates to the magnitiude of change each time parameters are updated. You could think of it as how big your steps are down a gradient."}),Object(j.jsx)(L.a,{variant:"body2",children:"The learning rate is applied to the opposite gradient after backpropogation."}),Object(j.jsx)(L.a,{variant:"h6",children:"Why would I change learning rate?"}),Object(j.jsx)(L.a,{variant:"body2",children:"Depending on the shape of the model and the amount of data,a higher learning rate could allow your model to take less epochs to reach the target loss. But if the learning rate is too large, you will never reach the minimum of loss that you want."})]})})]})]}),Object(j.jsxs)(V.a,{PaperProps:{style:{backgroundColor:"#FAFAFA"}},open:ue,children:[Object(j.jsx)(X.a,{children:Object(j.jsx)(U.a,{onClick:function(){t.setState({neuralNetworkHelp:!1})},children:Object(j.jsx)($.a,{})})}),Object(j.jsxs)(G.a,{children:[Object(j.jsx)("img",{src:te,alt:"how to use control center",width:"100%"}),Object(j.jsx)(w.a,{display:"flex",justifyContent:"center",children:Object(j.jsxs)(w.a,{marginBottom:5,children:[Object(j.jsx)(L.a,{variant:"h6",children:"Summary"}),Object(j.jsx)(L.a,{variant:"body2",children:"Each grey square with a black outline is a neuron. Each connection indicates where the inputs travel. The thikness and the color of each connection also indicate the weight associated."}),Object(j.jsx)(L.a,{variant:"body2",children:"As the weights change, there will be a visible change in stroke size."})]})})]})]}),Object(j.jsxs)(V.a,{PaperProps:{style:{backgroundColor:"#F7F7F7"}},open:pe,children:[Object(j.jsx)(X.a,{children:Object(j.jsx)(U.a,{onClick:function(){t.setState({scatterHelp:!1})},children:Object(j.jsx)($.a,{})})}),Object(j.jsxs)(G.a,{children:[Object(j.jsx)("img",{src:ae,alt:"fitment",width:"100%"}),Object(j.jsx)(w.a,{display:"flex",justifyContent:"center",children:Object(j.jsxs)(w.a,{marginBottom:5,children:[Object(j.jsx)(L.a,{variant:"h6",children:"Summary"}),Object(j.jsx)(L.a,{variant:"body2",children:"The black line represents the current predictions of the neural network."}),Object(j.jsx)(L.a,{variant:"body2",children:"Each gray dot is a xy coordinate that represents the input and input label."})]})})]})]})]})}}]),a}(s.Component),fe=(a(498),a(499),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)(z,{title:"Backpropogation Explainer"}),Object(j.jsx)(be,{})]})}}]),a}(s.Component)),ge=(a(501),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,546)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),s(e),i(e)}))});o.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(fe,{})}),document.getElementById("root")),ge()}},[[502,1,2]]]);
//# sourceMappingURL=main.0cdaf552.chunk.js.map