(this["webpackJsonpbackprop-explainer"]=this["webpackJsonpbackprop-explainer"]||[]).push([[0],{132:function(t,e,a){},559:function(t,e){},560:function(t,e){},568:function(t,e){},571:function(t,e){},572:function(t,e){},580:function(t,e,a){},581:function(t,e,a){"use strict";a.r(e);var n={};a.r(n),a.d(n,"formatWeightArray",(function(){return vt})),a.d(n,"toFunc2DArray",(function(){return Ot})),a.d(n,"flatten",(function(){return wt})),a.d(n,"getRandomInt",(function(){return kt})),a.d(n,"tensorToArray",(function(){return St}));var r={};a.r(r),a.d(r,"generateLinearScale",(function(){return Ct})),a.d(r,"generateLink",(function(){return Et})),a.d(r,"generateNeuronPlacement",(function(){return Nt})),a.d(r,"generateLinksPlacement",(function(){return Ft}));var s=a(10),i=a.n(s),o=a(59),c=a.n(o),l=a(4),h=a(11),u=a(14),d=a(15),p=(a.p,a.p+"static/media/headerTitle.0f9249c8.svg"),j=a(263),b=a(33),f=(a(132),a(9));var g=function(t){var e=t.source,a=t.target,n=t.color,r=t.isAnimating;return Object(f.jsxs)("g",{children:[Object(f.jsx)("defs",{children:Object(f.jsx)("marker",{id:"head",orient:"auto",markerWidth:"3",markerHeight:"4",refX:"0.1",refY:"2",children:Object(f.jsx)("path",{d:"M0,0 V4 L2,2 Z",fill:n})})}),Object(f.jsx)("path",{className:r?"absorb":"arrow",id:"arrow-line",markerEnd:"url(#head)",fill:"none",stroke:n,d:"M".concat(e.x,",").concat(e.y,", ").concat(a.x,", ").concat(a.y)})]})},m=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={},n}return Object(h.a)(a,[{key:"flatten",value:function(t){for(var e=[],a=0;a<t.length;a++)for(var n=0;n<t[a].length;n++)e.push(t[a][n]);return e}},{key:"isEmpty",value:function(t){return 0===t.length}},{key:"isUndefined",value:function(t){return"undefined"===typeof t}},{key:"isUndefined3d",value:function(t,e,a,n){return this.isUndefined(t[e])||this.isUndefined(t[e][a])||this.isUndefined(t[e][a][n])}},{key:"render",value:function(){var t=this,e=this.props,a=e.playing,n=e.mode,r=e.shapedLinks,s=e.shapedWeights,i=e.shapedRects,o=e.miniNN,c=e.subEpoch,l=e.keyFrameLoss,h=e.keyFrameLayer,u=(e.input,e.label,e.children,b.k().x((function(t){return t.x})).y((function(t){return t.y}))),d="black",p=32,j=function(t,e,a,n,r){var s=n?-a:a;return Object(f.jsx)(g,{source:{x:t,y:e},target:{x:t,y:e+s},color:r,isAnimating:"transition"===c})},m=Object(f.jsx)("svg",{id:"p",width:"810",height:"500",overflow:"visible",children:Object(f.jsxs)("g",{id:"ee",children:[Object(f.jsx)("path",{d:"M 750, 234 L 750, 300",stroke:2===l||1===l?"orange":d,className:n&&l>0?1===l?"edgeForward":2===l?"edgeBackward":"edgePaused":a}),Object(f.jsx)("path",{d:u({source:{x:766,y:315},target:{x:890,y:430}}),stroke:d,fill:"none",className:a}),Object(f.jsx)("path",{d:u({source:{x:766,y:250},target:{x:890,y:150}}),stroke:d,fill:"none",className:a}),r.map((function(e,r){return e.map((function(e,i){var l="edgePaused",u="orange",d=!1;return n&&"forward"===c&&r===h?(l="edgeForward",d=!0,u="orange"):n&&"backward"===c&&r===h&&(l="edgeBackward",d=!0),e.map((function(e,h){var p=t.isUndefined3d(s,r,i,h),j=p?[]:s[r][i][h],g=p?1:2*Math.abs(j)+.1,m=p?"lightgrey":j>0?"#4BA3C3":"#D62839";if(n&&"update"===c&&!0===t.props.isAnimating){var y=2*o.model[r][i].dWeights[h],x=.01*y;b.r("#nn").select("#p").select("#ee").select("#cpath".concat(r).concat(i).concat(h)).transition().duration(750).ease(b.d).attr("stroke-width",g-y).transition().duration(750).ease(b.e).attr("stroke-width",g-x)}return Object(f.jsx)("path",{id:"cpath".concat(r).concat(i).concat(h),d:e,className:n?l:a,strokeWidth:g,stroke:d?u:m,fill:"none"},h)}))}))})),Object(f.jsx)("rect",{x:55,y:234,width:p,height:p,fill:"darkgrey"}),i.map((function(e,a){return e.map((function(e,r){var s=!1,i="backward"===c||"transition"===c;return(n&&a<=h||i||"update"===c)&&(s=!0),Object(f.jsxs)("g",{children:[Object(f.jsx)("rect",{x:e.x,y:e.y,width:p,height:p,fill:b.o(104,104,104).brighter(s?o.model[a][r].actStep+t.props.lr:1),stroke:734===e.x&&234===e.y?"#507BB6":"black",strokeWidth:3}),null!==o&&n&&i&&a>=h-1&&0!==o.model[a][r].dActStep?j(e.x+16,e.y+16,Math.abs(o.model[a][r].dActStep),o.model[a][r].dActStep<0,"orange"):""]})}))})),Object(f.jsx)("rect",{x:734,y:300,width:p,height:p,fill:"none",stroke:"black"}),Object(f.jsx)("text",{fontFamily:"sans-serif",fontSize:"12px",x:739,y:318,children:"loss"})]})});return Object(f.jsx)("div",{id:"nn",children:m})}}]),a}(s.Component),y=a(2),x=a.n(y),v=a(13),O=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={},n}return Object(h.a)(a,[{key:"plotPoints",value:function(t,e,a){t.selectAll("circle").data(e).enter().append("circle").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).attr("r",(function(t,e){return e===a?5:2})).style("fill",(function(t,e){return e===a?"orange":"grey"}))}},{key:"componentDidMount",value:function(){var t=Object(v.a)(x.a.mark((function t(){var e,a,n,r,s,i,o,c,l,h,u,d,p;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.props,a=e.width,n=e.height,r=e.padding,s=e.start,i=e.stop,o=e.id,c=b.r("#nice".concat(o)),(l=c.append("svg").attr("width",a).attr("height",n).style("overflow","visible")).append("rect").attr("width",a).attr("height",n).attr("class","cord"),h=b.p().domain([s,i]).range([0,a-2*r]),u=b.p().domain([s,i]).range([n-2*r,0]),d=b.a().scale(h),p=b.b().scale(u),l.append("g").attr("class","axis").attr("transform","translate(0,".concat(n-2*r,")")).call(d),l.append("g").attr("class","axis").attr("transform","translate("+(a-2*r)+",0)").call(p),l.append("line").attr("x1",0).attr("y1",(n+1)/2).attr("x2",a).attr("y2",(n+1)/2).attr("class","split"),l.append("line").attr("x1",(a+1)/2).attr("y1",0).attr("x2",(a+1)/2).attr("y2",n).attr("class","split"),l.append("path").attr("id","epic").attr("stroke","none").attr("fill","none");case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){for(var t=this.props,e=t.width,a=t.height,n=t.padding,r=t.start,s=t.stop,i=t.X,o=t.y,c=t.yhat,l=t.id,h=t.select,u=b.p().domain([r,s]).range([0,e-2*n]),d=b.p().domain([r,s]).range([a-2*n,0]),p=b.r("#nice".concat(l)).select("svg"),j=[],f=0;f<i.length;f++)j.push({x:u(i[f]),y:d(o[f])});for(var g=[],m=0;m<i.length;m++)g.push([u(i[m]),d(c[m])]);p.selectAll("circle").remove(),this.plotPoints(p,j,h),p.select("#epic").transition().duration(this.props.duration).attr("d",b.j()(g)).attr("stroke","black").attr("fill","none")}},{key:"render",value:function(){var t=this.props.id;return Object(f.jsx)("div",{id:"nice".concat(t)})}}]),a}(s.Component),w=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){return Object(l.a)(this,a),e.call(this,t)}return Object(h.a)(a,[{key:"plotPoints",value:function(t,e,a){t.selectAll("circle").data(e).enter().append("circle").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).attr("r",(function(t,e){return e===a?5:2})).style("fill",(function(t,e){return e===a?"#4BA3C3":"grey"}))}},{key:"animateTruePredictions",value:function(t,e){t.select("#epic").transition().duration(1e3).ease(b.f).attr("d",b.j()(e)).attr("stroke","blue").attr("fill","none")}},{key:"componentDidMount",value:function(){var t=Object(v.a)(x.a.mark((function t(){var e,a,n,r,s,i,o,c,l,h,u,d,p;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.props,a=e.width,n=e.height,r=e.padding,s=e.start,i=e.stop,o=e.id,c=b.r("#animatedPlot".concat(o)),(l=c.append("svg").attr("width",a).attr("height",n).style("overflow","visible")).append("rect").attr("width",a).attr("height",n).attr("class","cord"),h=b.p().domain([s,i]).range([0,a-2*r]),u=b.p().domain([s,i]).range([n-2*r,0]),d=b.a().scale(h),p=b.b().scale(u),l.append("g").attr("class","axis").attr("transform","translate(0,".concat(n-2*r,")")).call(d),l.append("g").attr("class","axis").attr("transform","translate("+(a-2*r)+",0)").call(p),l.append("line").attr("x1",0).attr("y1",(n+1)/2).attr("x2",a).attr("y2",(n+1)/2).attr("class","split"),l.append("line").attr("x1",(a+1)/2).attr("y1",0).attr("x2",(a+1)/2).attr("y2",n).attr("class","split"),l.append("path").attr("id","epic").attr("stroke","none").attr("fill","none");case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"a",value:function(){for(var t=this.props,e=t.width,a=t.height,n=t.padding,r=t.start,s=t.stop,i=t.X,o=t.y,c=t.yhat,l=t.id,h=t.select,u=t.potential,d=(t.times,b.p().domain([r,s]).range([0,e-2*n])),p=b.p().domain([r,s]).range([a-2*n,0]),j=b.r("#animatedPlot".concat(l)).select("svg"),f=[],g=0;g<i.length;g++)f.push({x:d(i[g]),y:p(o[g])});for(var m=[],y=[],x=[],v=0;v<i.length;v++){var O=d(i[v]);m.push([O,p(c[v])]),x.push([O,p(u[v])]),y.push([O,p(0)])}j.selectAll("circle").remove(),this.plotPoints(j,f,h),"reset"===this.props.status?j.select("#epic").attr("id","epic").attr("stroke","none").attr("fill","none"):"real"===this.props.status?(j.select("#epic").attr("d",b.j()(y)).attr("stroke","black").attr("fill","none"),j.select("#epic").transition().duration(750).attr("d",b.j()(m))):"pred"===this.props.status&&(j.select("#epic").attr("d",b.j()(m)).attr("stroke","orangered").attr("fill","none"),j.select("#epic").transition().duration(750).attr("d",b.j()(x)))}},{key:"shouldComponentUpdate",value:function(){return!this.props.shouldNotRender}},{key:"render",value:function(){this.a();var t=this.props.id;return Object(f.jsx)("div",{id:"animatedPlot".concat(t)})}}]),a}(s.Component),k=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=b.r("#sweet"),e=100,a=300,n=b.p().domain([0,-1]).range([0,300]),r=b.p().domain([1,1]).range([100,0]),s=t.append("svg").attr("width",a).attr("height",e).style("overflow","visible");s.append("rect").attr("width",a).attr("height",e).attr("class","cord");var i=b.a().scale(n),o=b.b().scale(r);s.append("g").attr("class","axis").attr("id","x").attr("transform","translate(0,".concat(100,")")).call(i),s.append("g").attr("class","axis").attr("id","y").attr("transform","translate(300,0)").call(o.ticks(0)),s.append("path").attr("id","line").attr("stroke","none").attr("fill","none")}},{key:"componentDidUpdate",value:function(){for(var t=this.props,e=t.lossArray,a=t.duration,n=e.length-1,r=b.p().domain([0,n]).range([1,300]),s=b.m(e),i=b.l(e),o=b.p().domain([s,i]).range([100,0]),c=b.r("#sweet").select("svg"),l=[],h=0;h<e.length;h++)l.push([r(h),o(e[h])]);var u=b.a().scale(r),d=b.b().scale(o);c.select("#x").attr("transform","translate(0,".concat(100,")")).call(u.ticks(5)),c.select("#y").attr("transform","translate(300,0)").call(d.ticks(5)),c.select("#line").transition().duration(a).attr("d",b.j()(l)).attr("stroke","black").attr("fill","none")}},{key:"render",value:function(){return Object(f.jsx)("div",{id:"sweet"})}}]),a}(s.Component),S=(a(551),a(261)),C=function(t){return Object(f.jsx)(S.InlineMath,{math:t})},E=function(t){return Object(f.jsx)(S.BlockMath,{math:t})},N=a(43),F=a(617),A=a(599),L=a(601),M=a(620),P=(s.Component,a(602)),T=a(603),B=a(604),D=(s.Component,a(611)),R=(a.p,a.p+"static/media/scaled.80f83a70.gif"),I=a.p+"static/media/forward.94373b2e.svg",W=a.p+"static/media/backward.0c67cde4.svg",_=a(34),z=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={weight:-.82,bias:-.02,loss:0,domain:[],range:[],line:[],show:!1},n}return Object(h.a)(a,[{key:"loss",value:function(t,e,a){return _.r((function(){var n=_.q(t),r=_.q(e);return 1/(2*a)*_.o(_.i(_.n(r,n),2)).dataSync()[0]}))}},{key:"computeLine",value:function(t,e,a){for(var n,r=new Array(a.length),s=0;s<a.length;s++)r[s]=(n=a[s],t*n+e);return r}},{key:"zeros",value:function(t){for(var e=new Array(t),a=0;a<t;a++)e[a]=0;return e}},{key:"range",value:function(t,e,a){for(var n=[],r=t;r<=e;r+=a)n.push(r);return n}},{key:"dataGenerator",value:function(){var t=this.range(-1,1,.1),e=this.computeLine(.65,-.3,t),a=this.computeLine(this.state.weight,this.state.bias,t),n=this.loss(e,a,e.length);this.setState({domain:t,range:e,line:a,loss:n})}},{key:"componentDidMount",value:function(){this.dataGenerator()}},{key:"render",value:function(){var t=this,e=this.state,a=e.domain,n=e.range,r=e.bias,s=e.weight,i=e.line,o=e.loss,c=e.show;return Object(f.jsxs)(F.a,{display:"flex",justifyContent:"center",children:[Object(f.jsx)(F.a,{style:{filter:"blur(".concat(c?0:25,"px)")},children:Object(f.jsx)(O,{width:400,height:400,padding:0,start:-1,stop:1,X:a,y:n,yhat:i,id:69,select:-1,duration:0})}),Object(f.jsx)(F.a,{marginLeft:7,children:Object(f.jsx)(A.a,{variant:"outlined",children:Object(f.jsxs)(L.a,{children:[Object(f.jsx)("h2",{children:"Manual Best Fit"}),Object(f.jsxs)("p",{children:["Manually tune"," ",Object(f.jsx)("em",{style:{color:"#4050B5"},children:"weight"})," and"," ",Object(f.jsx)("em",{style:{color:"#F50257"},children:"bias"})," and try to reach a"," ",Object(f.jsx)("em",{style:{color:"red"},children:"loss"})," of 0"]}),Object(f.jsx)(M.a,{value:s,onChange:function(e,i){var o=t.computeLine(s,r,a),c=t.loss(n,o,n.length);t.setState({weight:i,line:o,loss:c})},min:-1,step:.01,max:1,valueLabelDisplay:"auto",color:"primary"}),Object(f.jsx)(M.a,{value:r,onChange:function(e,i){var o=t.computeLine(s,r,a),c=t.loss(n,o,n.length);t.setState({bias:i,line:o,loss:c})},min:-1,step:.01,valueLabelDisplay:"auto",max:1,color:"secondary"}),Object(f.jsxs)("h3",{children:[C("\\text{neuron}(x) = ")," ",Object(f.jsx)("em",{style:{color:"#4050B5"},children:C("".concat(s))}),C("x + ")," ",Object(f.jsx)("em",{style:{color:"#F50257"},children:C("".concat(r))})]}),Object(f.jsxs)("h3",{children:["MSE loss:"," ",C("\\frac{1}{J}\\sum_{i = 0}^J (\\hat{y} - y)^2 ="),Object(f.jsxs)("em",{style:{color:"darkred"},children:[" ",C("".concat(o.toFixed(7)))]})]}),Object(f.jsx)(B.a,{size:"small",variant:"contained",style:{backgroundColor:"#155676",color:"white"},onClick:function(){t.setState({show:!t.state.show})},children:"Click to Reveal Graph"})]})})})]})}}]),a}(s.Component),q=a(50),H=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={width:400,height:400},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=Object(v.a)(x.a.mark((function t(){var e,a,n,r,s,i,o,c,l,h,u,d,p,j,f,g,m;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j=function(t,e){for(var a=i.X,n=i.y,r=0,s=0;s<i.X.length;s++)r+=Math.pow(t*a[s]+e-n[s],2);return r/(2*a.length)},t.next=3,this.state;case 3:return e=t.sent,a=e.width,n=e.height,r=b.r("#divContour").select("#contour"),t.next=9,this.props;case 9:for(s=t.sent,i=s.data,o=s.darkness,c=a,l=n,h=new Array(c*l),u=.5,d=0;u<l;++u)for(p=.5;p<c;++p,++d)h[d]=j(p/c*10-5,u/l*20);return t.next=16,b.n(o,20,1).map((function(t){return Math.pow(2,t)}));case 16:f=t.sent,g=b.q(b.g(f),b.i),m=b.c().size([c,l]).thresholds(f)(h),r.append("g").attr("fill","none").selectAll("path").data(m).join("path").attr("fill",(function(t){return g(t.value)})).attr("d",b.h()),r.append("circle").attr("cx",a/2).attr("cy",0).attr("r",5).style("fill","none").style("stoke","none");case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=this.state,e=t.width,a=t.height,n=this.props,r=n.loss,s=n.ms,i=n.m,o=n.b,c=b.r("#divContour").select("#contour");null!=r?r<1e3&&c.select("circle").transition().duration(200-s).attr("cx",e/2+i/10*e).attr("cy",o/20*a).attr("r",2*r+5).style("fill","red").style("opacity","0.5"):c.select("circle").attr("cx",e/2).attr("cy",0).attr("r",5).style("fill","none").style("stroke","none")}},{key:"render",value:function(){var t=this.state,e=t.width,a=t.height;return Object(f.jsx)("div",{id:"divContour",children:Object(f.jsx)("svg",{style:{width:e,height:a},id:"contour"})})}}]),a}(s.Component),U=a(605),X=a(607),G=a(606),V=a(608),Y=a(609),J=a(610),Z=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={yhat:[],darkness:-8,playButton:!0,linreg:{meanSquaredError:0,rsquared:null,data:{X:[],y:[]},hyperparams:{learningRate:.03,epochs:0,loss:null,speed:200},tunableparams:{m:0,b:0}}},n.generateData=n.generateData.bind(Object(N.a)(n)),n.linearRegression=n.linearRegression.bind(Object(N.a)(n)),n.a=n.a.bind(Object(N.a)(n)),n.handleSlider=n.handleSlider.bind(Object(N.a)(n)),n.reset=n.reset.bind(Object(N.a)(n)),n}return Object(h.a)(a,[{key:"reset",value:function(){this.generateData(),this.setState(Object(q.a)(Object(q.a)({},this.state),{},{playButton:!0,linreg:Object(q.a)(Object(q.a)({},this.state.linreg),{},{rsquared:null,hyperparams:Object(q.a)(Object(q.a)({},this.state.linreg.hyperparams),{},{epochs:0,loss:null}),tunableparams:{m:0,b:0}})}))}},{key:"generateData",value:function(){var t=this;_.r((function(){var e=[0,1,2,3,4,5],a=[5,4,3,2,1,0],n=_.q(a),r=_.g(n).dataSync()[0],s=1/(2*e.length)*_.o(_.i(_.n(r,n),2)).dataSync()[0];t.setState(Object(q.a)(Object(q.a)({},t.state),{},{yhat:[0,0,0,0,0,0],linreg:Object(q.a)(Object(q.a)({},t.state.linreg),{},{meanSquaredError:s,data:{X:e,y:a}})}))}))}},{key:"linearRegression",value:function(){var t=this;_.r((function(){if(t.state.linreg.hyperparams.epochs>1e3)t.setState({playButton:!t.state.playButton});else{var e=t.state.linreg.tunableparams,a=e.m,n=e.b,r=t.state.linreg.hyperparams.learningRate,s=t.state.linreg.data,i=s.X,o=s.y,c=_.q(i),l=_.q(o),h=function(t,e,a){return _.a(_.h(t,e),a)}(c,a,n),u=c.shape[0],d=1/u*_.o(_.h(_.n(h,l),c)).dataSync()[0],p=1/u*_.o(_.n(h,l)).dataSync()[0],j=function(t,e){return 1/(2*u)*_.o(_.i(_.n(e,t),2)).dataSync()[0]}(l,h);a+=-r*d,n+=-r*p;var b=1-j/t.state.linreg.meanSquaredError,f=t.state.linreg.hyperparams.epochs+1,g=Array.from(h.dataSync());t.setState(Object(q.a)(Object(q.a)({},t.state),{},{yhat:g,linreg:Object(q.a)(Object(q.a)({},t.state.linreg),{},{rsquared:b,tunableparams:{m:a,b:n},hyperparams:Object(q.a)(Object(q.a)({},t.state.linreg.hyperparams),{},{epochs:f,loss:j})})}))}}))}},{key:"a",value:function(){var t=Object(v.a)(x.a.mark((function t(){var e,a,n,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=function(t){return new Promise((function(e){return setTimeout(e,t)}))},a=200;case 2:return n=this.state.linreg.hyperparams.speed,r=a-n,t.next=7,this.linearRegression();case 7:return t.next=9,e(r);case 9:if(!0!==this.state.playButton){t.next=11;break}return t.abrupt("break",13);case 11:t.next=2;break;case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleSlider",value:function(t,e){this.setState({linreg:Object(q.a)(Object(q.a)({},this.state.linreg),{},{hyperparams:Object(q.a)(Object(q.a)({},this.state.linreg.hyperparams),{},{speed:e})})})}},{key:"componentDidMount",value:function(){var t=Object(v.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.generateData();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t,e,a,n=this,r=this.state.linreg.tunableparams,s=r.m,i=r.b,o=this.state.linreg.hyperparams,c=o.loss,l=o.speed,h=o.epochs,u=this.state.linreg,d=(u.rsquared,u.data);return Object(f.jsx)("div",{children:Object(f.jsxs)(F.a,{display:"flex",justifyContent:"center",marginTop:2,children:[Object(f.jsx)(F.a,{marginTop:10,marginRight:10,children:Object(f.jsx)(O,{width:400,height:400,padding:0,start:0,stop:5,X:d.X,y:d.y,yhat:this.state.yhat,id:420,select:-1,duration:0})}),Object(f.jsxs)(A.a,{variant:"outlined",children:[Object(f.jsxs)(L.a,{children:[Object(f.jsx)("h2",{children:"Auto Best Fit"}),Object(f.jsx)("p",{children:"forward, backward, update per EPOCH"}),Object(f.jsxs)(P.a,{variant:"h4",component:"h2",children:["EPOCH: ",h]}),Object(f.jsx)(P.a,{variant:"h6",component:"h2",style:{color:(a=c,null===a?"#dce0dd":"black")},children:" loss = ".concat((t=c,e=10,null===t?t:t.toPrecision(e)))}),Object(f.jsx)(U.a,{onClick:this.reset,children:Object(f.jsx)(G.a,{})}),Object(f.jsx)(X.a,{style:{background:this.state.playButton?"#175676":"#D62839",color:"white"},onClick:Object(v.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.setState({playButton:!n.state.playButton});case 2:return t.next=4,n.a();case 4:case"end":return t.stop()}}),t)}))),disableTouchRipple:!0,children:this.state.playButton?Object(f.jsx)(V.a,{}):Object(f.jsx)(Y.a,{})}),Object(f.jsx)(U.a,{style:{color:200===l?"grey":"#FFC006"},onClick:function(){n.setState({linreg:Object(q.a)(Object(q.a)({},n.state.linreg),{},{hyperparams:Object(q.a)(Object(q.a)({},n.state.linreg.hyperparams),{},{speed:200===l?120:200})})})},children:Object(f.jsx)(J.a,{})})]}),Object(f.jsx)(H,{ms:l,data:d,m:isFinite(s)?s:0,b:isFinite(i)?i:0,loss:c,darkness:this.state.darkness})]})]})})}}]),a}(s.Component),K=a(92),Q=a.p+"static/media/structMan.d909fd24.svg",$=a.p+"static/media/structArt.5830dcf2.svg",tt=a.p+"static/media/structNN.e936abf1.svg",et=a.p+"static/media/structLin.936d1ee7.svg",at=function(){return Object(f.jsx)(F.a,{display:"flex",justifyContent:"center",children:Object(f.jsxs)(F.a,{children:[Object(f.jsxs)(B.a,{onClick:function(){K.scroller.scrollTo("article",{duration:1500,delay:100,smooth:!0})},color:"secondary",children:[" ",Object(f.jsx)("img",{src:$})]}),Object(f.jsxs)(F.a,{children:[Object(f.jsxs)(B.a,{onClick:function(){K.scroller.scrollTo("structMan",{duration:1500,delay:100,smooth:!0,offset:-100})},color:"secondary",children:[Object(f.jsx)("img",{src:Q})," "]}),Object(f.jsxs)(B.a,{onClick:function(){K.scroller.scrollTo("structLin",{duration:1500,delay:100,smooth:!0,offset:-100})},color:"secondary",children:[" ",Object(f.jsx)("img",{src:et})]})]}),Object(f.jsx)(F.a,{children:Object(f.jsx)(B.a,{onClick:function(){K.scroller.scrollTo("mainTool",{duration:1500,delay:100,smooth:!0,offset:-100})},color:"secondary",children:Object(f.jsx)("img",{src:tt})})})]})})},nt=function(){var t=function(t){return Object(f.jsx)(P.a,{variant:"h3",children:Object(f.jsx)("b",{children:t})})},e=function(t){return Object(f.jsx)(P.a,{variant:"h4",children:t})},a=Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),t("Introduction"),Object(f.jsx)(P.a,{variant:"h6",children:"Most people abstract the idea of backpropagation when learning neural networks because it is by far the most notation heavy part. The goal of this article is to marry the notation with some interactive tools to better understand a very important idea."}),Object(f.jsx)(P.a,{variant:"h6",children:Object(f.jsx)("b",{children:'If you want to skip ahead, click on a tool below. Otherwise, click the "Article" section, or scroll to the start of the article.'})}),Object(f.jsx)(at,{}),Object(f.jsx)(K.Element,{name:"article",children:t("Backpropagation on one Neuron")}),Object(f.jsx)("br",{}),e("Getting Started"),Object(f.jsx)(P.a,{variant:"h6",children:"Our goal in a neural network is to lower whatever loss function we define. For this article, we will be performing regression and using mean squared error loss (MSE)."}),E("\\text{MSE} = \\frac{1}{J}\\sum_{i=0}^{J}(\\hat{y} - y)^2"),Object(f.jsx)(P.a,{variant:"h6",children:"Before hitting the calculus, try to lower loss the best you can by adjusting the weight and bias on this one neuron network. When you feel like you\u2019ve lowered the loss enough (or need some help), reveal the graph."}),Object(f.jsx)("br",{}),Object(f.jsx)(K.Element,{name:"structMan",children:Object(f.jsx)(z,{})}),Object(f.jsx)("br",{}),e("Explanation"),Object(f.jsx)(P.a,{variant:"h6",children:"The intuition from this one scenario essentially explains all of backpropagation and optimization. It is really that simple!"}),Object(f.jsx)(P.a,{variant:"h6",children:"When you start to change the weight, you observe where the loss moves, if it moves up, you probably move the weight the other direction to lower the loss. This, without the math, is the main principle behind optimizing a nerual network."}),Object(f.jsxs)(P.a,{variant:"h6",children:["The change you observed from the ouput of the loss function is the rate of change. For a more accurate instantaneous rate of change we essentially do the slope formula but have the change the second point approach 0. For Example,",E("\\lim_{h \\to 0} \\frac{f(x + h) - f(x)}{h} = \\frac{df}{dx}")]}),Object(f.jsxs)(P.a,{variant:"h6",children:["Where ",C("\\frac{df}{dx}")," is the derivative of ",C("f")," with respect to ",C("x"),", or in plain english: how the output of"," ",C("f")," is affected by the variable ",C("x"),". In the context of our one neuron network, if I represent weight as ",C("w_0")," bias as ",C("b"),", the neuron as ",C("n")," and mean squared error loss"," ",C("\\text{MSE}"),E("\\lim_{h \\to 0} \\frac{\\text{MSE}(n(w_0 + h,b)) - \\text{MSE}(n(w_0,b))}{h} = \\frac{\\partial \\text{MSE}}{\\partial w_0}"),E("\\lim_{h \\to 0} \\frac{\\text{MSE}(n(w_0,b+h)) - \\text{MSE}(n(w_0,b))}{h} = \\frac{\\partial \\text{MSE}}{\\partial b}")]}),Object(f.jsxs)(P.a,{variant:"h6",children:["Where ",C("\\frac{\\partial \\text{MSE}}{\\partial w_0}")," is the partial derivative of ",C("\\text{MSE}")," with respect to"," ",C("w_0")," or in plain english: how the output of"," ",C("\\text{MSE}")," is affected by the variable ",C("w_0"),"."]}),Object(f.jsxs)(P.a,{variant:"h6",children:["Where ",C("\\frac{\\partial \\text{MSE}}{\\partial b}")," is the partial derivative of ",C("\\text{MSE}")," with respect to"," ",C("b")," or in plain english: how the output of"," ",C("\\text{MSE}")," is affected by the variable ",C("b"),"."]}),Object(f.jsxs)(P.a,{variant:"h6",children:["Now we have a way to compute how each parameter affects the output loss ",C("\\text{MSE}"),". Which is also called the gradient of ",C("\\text{MSE}"),".And can use the intuiton we gained from the interactive exercise before, and use the partial derivatives of loss with respect to each parameter to tune those paramters into lowering the loss."]}),Object(f.jsxs)(P.a,{variant:"h6",children:["Backpropagation is the term we use to describe the calculuating of the partial derivatives of with respect to each paramter because of the direction we travel to compute the derivatives. In essence, we first need to forward propagate: push the input through the network, get an output and loss. We then can go backwards and compute how each value in the forward pass affected the loss using the chain rule in calculus. The chain rule is very intutive and essentially takes into account how nested function affect each other.",E("\\frac{\\partial \\text{MSE}}{\\partial w_0} = \\frac{\\partial \\text{MSE}}{\\partial n(w_0,b)} \\cdot \\frac{\\partial n(w_0,b)}{\\partial w_0} "),E("\\frac{\\partial \\text{MSE}}{\\partial b} = \\frac{\\partial \\text{MSE}}{\\partial n(w_0,b)} \\cdot \\frac{\\partial n(w_0,b)}{\\partial b} ")]}),Object(f.jsxs)(P.a,{variant:"h6",children:["Where how ",C("\\frac{\\partial \\text{MSE}}{\\partial w_0}")," ","(how ",C("w_0")," affects loss) is broken up into how the input of loss (the output of the neuron) affects loss compounded with how the weight affects the output of the neuron. Essnetially we are chaining rates of change due to the nested nature of the function."]}),Object(f.jsx)("br",{}),e("Concrete Example"),Object(f.jsxs)(P.a,{variant:"h6",children:["Let's go through a concrete example of a forward and backward pass. We will define the input as ",C("x_0 = 2.1"),", the weight as ",C("w_0 = 1"),", and the bias as ",C("b = 0")," "]}),Object(f.jsx)("img",{width:"100%",src:I}),Object(f.jsxs)(P.a,{variant:"h6",children:["Now we can go backwards and compute partial derivatives with the chain rule to get the gradient ",C("\\nabla \\text{loss}")]}),Object(f.jsx)("img",{width:"100%",src:W}),Object(f.jsxs)(P.a,{variant:"h6",children:[E("\\frac{\\partial \\text{loss}}{\\partial w_0} = -7.98"),E("\\frac{\\partial \\text{loss}}{\\partial b} = -3.8")]}),Object(f.jsxs)(P.a,{variant:"h6",children:["Reassign the parameters to opposite gradient to descend loss, in this case learning rate is ",C("\\text{lr} = 0.01"),E("w_0 := w_0 - \\text{lr} \\cdot \\frac{\\partial \\text{loss}}{\\partial w_0} = (1) - (0.01) \\cdot (-7.98) = 1.0798"),E("b := b - \\text{lr} \\cdot \\frac{\\partial \\text{loss}}{\\partial b} = (0) - (0.01) \\cdot (-3.8) = 0.038 "),"Re calculate forward pass with new weight and bias",E("\\text{loss} = ((1.0798)(2.1) + 0.038) - 4)^2 = 2.87")]}),Object(f.jsxs)(P.a,{variant:"h6",children:["Total loss savings of ",C("3.61 - 2.87 = 0.74")]}),Object(f.jsx)(P.a,{variant:"h6",children:"To see this in action over many epochs try out playing the next component which computes forward, backward and update per epoch. Automatically."}),Object(f.jsx)(K.Element,{name:"structLin",children:Object(f.jsx)(Z,{})}),"Now you understand how the logic and intuition of backpropagation and how neural networks learn, but what about neural networks with more neurons?",Object(f.jsx)("br",{}),t("Scaling up Neurons and Layers"),e("The Changes"),Object(f.jsx)(P.a,{variant:"h6",children:"Scaling up to more neurons and layers. Doing backward propagation on one neuron is not difficult and can produce great results when fitting linear data. But as we want to process more non linear data, we have to increase complexity to vary the output and create more parameters that we can tune. We do this by adding layers of neurons where all the outputs of one layer are the inputs to the next, essentially a very nested function where inputs are distributed to all functions. This is the simple intuition in scaling up to more neurons and more layers. Other than this we also use an activation function, ReLU in our case, to introduce non linearity to the linear nature of each neuron while also introducing a point of deactivation. This point of deactivation is simply 0, which removes the impact of that neuron on updating parameters allowing for certain neurons to \u201cfire\u201d while others don't change at all depending on input."}),Object(f.jsx)("br",{}),e("The Process"),Object(f.jsx)(P.a,{variant:"h6",children:"First we define the network, we push our inputs through the model (forward propagation), then we calculate how each parameter in the network affects the loss (backward propagation), then we update the parameters with gradient descent. Notice how this is the same process as the one neuron network. THE PROCESS DOESNT CHANGE. We have to do more backward calculations, more chain rule, but that process does not change either."}),Object(f.jsx)("img",{width:"100%",src:R}),Object(f.jsxs)(P.a,{variant:"h6",children:["Above is an exaple of a forward pass, backward pass and update. Notice the orange arrows that represent"," ",C("-\\frac{\\partial \\text{activation}}{\\partial \\text{loss}}"),", which tells us which direction the activation of neuron should be nudged to lower loss."]}),Object(f.jsx)(P.a,{variant:"body2",children:"In this training example we use the original definiton of SGD (stochastic gradient descent) and only use one training example (batch size 1)."}),Object(f.jsx)("br",{}),t("Conclusion"),e("Closing Statement"),Object(f.jsx)(P.a,{variant:"h6",children:"By the end, I hope you gained some degree of intution for how and why we perform backproagation in neural networks. Now if you come into contact with neural networks and things aren't working out don't simply throw more data at it like many do, instead think back to the logic and intuition or the processes that occur and you be able to solve your problems better and faster."}),Object(f.jsx)("br",{}),e("Seeing things in Action"),Object(f.jsx)(P.a,{variant:"h6",children:"Since you know how and why backpropagation is performed, cement that knowledge by seeing the whole process in action below. Start by pressing play, then when you are ready press the EPOCH to see the whole process on the a single Epoch: forward, backward, update. And customize the hyperparamters as you see fit."}),Object(f.jsxs)(P.a,{variant:"h6",children:[Object(f.jsx)("b",{children:"If you need help, click on a "}),Object(f.jsx)(D.a,{style:{color:"#FFA500"}})," ",Object(f.jsx)("b",{children:"to reveal extra descriptions"})]}),Object(f.jsx)("br",{})]});return Object(f.jsx)(F.a,{justifyContent:"center",display:"flex",children:Object(f.jsx)(F.a,{maxWidth:"60%",children:a})})},rt=a(20),st=a(262),it=a.n(st),ot=a(619),ct=a(621),lt=a(618),ht=a(613),ut=a(615),dt=a(614),pt=a.p+"static/media/controlcenter.3793afef.gif",jt=a.p+"static/media/customization.05bd2f71.gif",bt=a.p+"static/media/nn.984f5d8c.png",ft=a.p+"static/media/scatter.1bf50e5e.gif",gt=a.p+"static/media/key.4c64b0b2.svg",mt=function(){function t(e,a){Object(l.a)(this,t),this.weights=e,this.bias=a}return Object(h.a)(t,[{key:"mult",value:function(t,e){return t.map((function(t,a){return t*e[a]}))}},{key:"dMult",value:function(t,e){return this.mult(t,e)}},{key:"sum",value:function(t){return t.reduce((function(t,e){return t+e}))}},{key:"dSum",value:function(t,e){for(var a=[],n=0;n<e;n++)a.push(t);return a}},{key:"linear",value:function(t){return t}},{key:"forward",value:function(t,e){var a=this.weights,n=this.bias,r=this.mult,s=this.sum,i=r(t,a),o=s(i)+n,c=e(o);this.inputs=t,this.multStep=i,this.sumStep=o,this.actStep=c,this.output=c}},{key:"backward",value:function(t,e){var a=this.inputs,n=this.weights,r=this.actStep,s=this.dSum,i=this.mult,o=this.sum,c=e(r)*t,l=s(c,a.length),h=c,u=i(l,a),d=i(l,n),p=o(d);this.dvalue=t,this.dActStep=c,this.dSumStep=l,this.dBias=h,this.dWeights=u,this.dInputs=d,this.dInputsSum=p}}]),t}(),yt=function(){function t(){Object(l.a)(this,t)}return Object(h.a)(t,[{key:"forward",value:function(t,e){var a=t-e,n=this.output=Math.pow(t-e,2);this.subStep=a,this.squareStep=n,this.output=n}},{key:"backward",value:function(){this.dInputs=2*this.subStep}}]),t}(),xt=function(){function t(e,a,n){Object(l.a)(this,t),this.model=[],this.loss=new yt,this.shape=e;for(var r=0;r<a.length;r++){for(var s=[],i=0;i<a[r].length;i++)s.push(new mt(a[r][i],n[r][i]));this.model.push(s)}}return Object(h.a)(t,[{key:"sum",value:function(t){return t.reduce((function(t,e){return t+e}))}},{key:"add",value:function(t,e){var a=t.length,n=e.length;if(n!=a)return console.error("".concat(a," does not match ").concat(n,", so returned empty array")),[];for(var r=new Array(a),s=0;s<t.length;s++)r[s]=t[s]+e[s];return r}},{key:"zeros",value:function(t){for(var e=new Array(t),a=0;a<t;a++)e[a]=0;return e}},{key:"dReLU",value:function(t){return t>0?1:0}},{key:"dLinear",value:function(t){return 1}},{key:"ReLU",value:function(t){return Math.max(0,t)}},{key:"linear",value:function(t){return t}},{key:"forward",value:function(t,e){for(var a=[t],n=this.model.length,r=0;r<n-1;r++){for(var s=[],i=0;i<this.model[r].length;i++)this.model[r][i].forward(a,this.ReLU),s.push(this.model[r][i].output);a=s}this.model[n-1][0].forward(a,this.linear),this.yhat=this.model[n-1][0].output,this.loss.forward(this.yhat,e)}},{key:"backward",value:function(){this.sum;var t=this.add,e=this.zeros;this.loss.backward();var a=[this.loss.dInputs],n=this.model.length;this.model[n-1][0].backward(a[0],this.dLinear),a=this.model[n-1][0].dInputs;for(var r=n-2;r>=0;r--){for(var s=e(this.model[r][0].inputs.length),i=0;i<this.model[r].length;i++)this.model[r][i].backward(a[i],this.dReLU),s=t(s,this.model[r][i].dInputs);a=s}}},{key:"update",value:function(t){for(var e=function(t,e,a){return t-e*a},a=0;a<this.model.length;a++)for(var n=0;n<this.model[a].length;n++)for(var r=0;r<this.model[a][n].dWeights.length;r++){var s=e(this.model[a][n].weights[r],t,this.model[a][n].dWeights[r]),i=e(this.model[a][n].bias,t,this.model[a][n].dBias);this.model[a][n].weights[r]=s,this.model[a][n].bias=i}}},{key:"throttleForward",value:function(t,e,a,n){var r=this.model[e][t].output+a;this.model[e][t].output=r;for(var s=[],i=0;i<this.model[e].length;i++)s.push(this.model[e][i].output);for(var o=this.model.length,c=e+1;c<o-1;c++){for(var l=[],h=0;h<this.model[c].length;h++)this.model[c][h].forward(s,this.ReLU),l.push(this.model[c][h].output);s=l}this.model[o-1][0].forward(s,this.linear),this.yhat=this.model[o-1][0].output,this.loss.forward(this.yhat,n)}}]),t}();function vt(t,e){for(var a=[],n=0;n<t.length;n++){for(var r=e[n+1],s=[],i=0;i<r;i++){for(var o=[],c=i;c<t[n].length;c+=r)o.push(t[n][c]);s.push(o)}a.push(s)}return a}function Ot(t,e){for(var a=0;a<t.length;a++)for(var n=0;n<t[a].length;n++)t[a][n]=+t[a][n].toFixed(e);return t}function wt(t){for(var e=[],a=0;a<t.length;a++)for(var n=0;n<t[a].length;n++)e.push(t[a][n]);return e}function kt(t){return Math.floor(Math.random()*Math.floor(t))}function St(t){return Array.from(t.dataSync())}function Ct(t,e){return{xScale:b.p().domain(t.domain).range(t.range),yScale:b.p().domain(e.domain).range(e.range)}}function Et(t){return b.k().x((function(e){return e.x+t})).y((function(e){return e.y+t}))}function Nt(t,e,a,n,r,s,i){var o=[],c=[];o.push([n]),c.push(n);for(var l=1;l<t.length-1;l++){for(var h=[],u=0;u<t[l];u++){var d={x:s(e[l])-a/2,y:i(92-12*u)-a/2};h.push(d),c.push(d)}o.push(h)}return c.push(r),o.push([r]),{flattenedNeurons:c,shapedNeurons:o}}function Ft(t,e,a){for(var n=[],r=[],s=[],i=1;i<t.length;i++){s=[];for(var o=0;o<t[i];o++){n=[];for(var c=0;c<t[i-1];c++)n.push(a({source:e[i-1][c],target:e[i][o]}));s.push(n)}r.push(s)}return r}var At=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={tensorFlowNN:null,miniNN:null,X:[],y:[],yhat:[],shape:[1,8,8,1],lr:.005,epoch:0,cpyEpoch:0,biasesData:[],weightsData:[],lossArray:[],loss:null,scale:5,rects:[],weights:[],shapedWeights:[],shapedRects:[],shapedLinks:[],direction:"edgePaused",curve:"sin",controls:{playing:!1,speed:100},sliderVal:2,mode:!1,stopRender:!1,keyFrameLayer:0,keyFrameLoss:0,keyFrameScatter:0,subEpoch:"",isAnimating:!1,lossSavings:0,lossDifference:0,singleInputExample:0,singleLabelExample:0,newOutput:0,controlCenterHelp:!1,customizationHelp:!1,neuralNetworkHelp:!1,scatterHelp:!1,lossHelp:!1,lossChange:0,potentialYhat:[],singleInputIndex:-1,shouldNotRender:!1,status:"reset"},n.initNeuralNetwork=n.initNeuralNetwork.bind(Object(N.a)(n)),n.run=n.run.bind(Object(N.a)(n)),n.genTensorData=n.genTensorData.bind(Object(N.a)(n)),n.mutate=n.mutate.bind(Object(N.a)(n)),n.train=n.train.bind(Object(N.a)(n)),n.printParameters=n.printParameters.bind(Object(N.a)(n)),n.reset=n.reset.bind(Object(N.a)(n)),n.resetParameters=n.resetParameters.bind(Object(N.a)(n)),n.asyncPause=n.asyncPause.bind(Object(N.a)(n)),n.changeModelLr=n.changeModelLr.bind(Object(N.a)(n)),n.anim=n.anim.bind(Object(N.a)(n)),n.randomInputGeneration=n.randomInputGeneration.bind(Object(N.a)(n)),n}return Object(h.a)(a,[{key:"randomInputGeneration",value:function(t,e,a,r,s,i,o){var c=n.getRandomInt(50),l=t[c],h=e[c],u=n.formatWeightArray(a,s),d=new xt(s,u,r),p=new xt(s,u,r);d.forward(l,h),d.backward(),p.forward(l,h),p.backward(),p.update(i),p.forward(l,h);var j=p.yhat,b=p.loss.output,f=b,g=d.loss.output-b,m=function(t){for(var e=t.length,a=new Array(e),n=0;n<e;n++)p.forward(t[n],0),a[n]=p.yhat;return a}(t);this.setState(Object(q.a)(Object(q.a)({},this.state),{},{miniNN:d,potentialYhat:m,mode:!0,lossSavings:f,lossDifference:g,singleInputIndex:c,singleInputExample:l,singleLabelExample:h,newOutput:j,controls:Object(q.a)(Object(q.a)({},this.state.controls),{},{playing:!1})}))}},{key:"anim",value:function(){var t=Object(v.a)(x.a.mark((function t(){var e,a,n,r,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.state.shape,a=750,n=function(t){return new Promise((function(e){return setTimeout(e,t)}))},this.setState({subEpoch:"forward",status:"reset",isAnimating:!0,lossChange:0,cpyEpoch:this.state.epoch,keyFrameScatter:0}),r=0;case 5:if(!(r<e.length)){t.next=14;break}if(this.setState({keyFrameLayer:r}),r!==e.length-1){t.next=9;break}return t.abrupt("continue",11);case 9:return t.next=11,n(a);case 11:r++,t.next=5;break;case 14:return this.setState({keyFrameLoss:1,keyFrameScatter:1,status:"real",shouldNotRender:!0}),t.next=17,n(a);case 17:return this.setState({keyFrameLoss:2,shouldNotRender:!0}),t.next=20,n(a);case 20:this.setState({keyFrameLoss:3}),this.setState({lossChange:this.state.miniNN.loss.output}),this.setState({subEpoch:"backward",keyFrameScatter:2}),s=e.length-1;case 24:if(!(s>=0)){t.next=31;break}return this.setState({keyFrameLayer:s}),t.next=28,n(a);case 28:s--,t.next=24;break;case 31:return this.setState({keyFrameLayer:-1}),t.next=34,n(a);case 34:return this.setState({subEpoch:"transition"}),t.next=37,n(1e3);case 37:return this.setState({subEpoch:"update",shouldNotRender:!1}),t.next=40,n(1e3);case 40:this.setState({isAnimating:!1,lossChange:this.state.lossSavings,keyFrameScatter:4,cpyEpoch:this.state.cpyEpoch+1,status:"pred"});case 41:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initNeuralNetwork",value:function(t){var e=this.state.controls.playing;if(e){if(e){var a=this.state,s=a.weightsData,i=a.shape,o=n.flatten(s),c=n.formatWeightArray(s,i);this.setState({weights:o,shapedWeights:c})}}else{var l=32,h=r.generateLinearScale({domain:[0,100],range:[50,750]},{domain:[0,100],range:[500,0]}),u=h.xScale,d=h.yScale,p={x:55,y:234},j={x:734,y:234},b=r.generateLink(16),f=r.generateNeuronPlacement(t,[0,25,50,75,0],l,p,j,u,d),g=f.flattenedNeurons,m=f.shapedNeurons,y=r.generateLinksPlacement(t,m,b);m.splice(0,1),this.setState({shapedLinks:y,rects:g,shapedRects:m})}}},{key:"changeModelLr",value:function(t){var e=this;_.r((function(){e.setState({lr:t})}))}},{key:"run",value:function(){var t=Object(v.a)(x.a.mark((function t(){var e;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!this.state.controls.playing,this.mutate("controls","playing",e),!0!==e){t.next=5;break}return t.next=5,this.train(this.state.X,this.state.y);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"mutate",value:function(t,e,a){var n=this;_.r((function(){var r=Object(q.a)({},n.state);t in r&&e in r[t]?(r[t][e]=a,n.setState({state:r})):console.error("Could not be found in state")}))}},{key:"addModel",value:function(t){var e=this;return _.r((function(){var a=e.state.shape;t.add(_.d.dense({inputShape:[1],units:a[1],activation:"relu",useBias:!0}));for(var n=2;n<a.length-1;n++)t.add(_.d.dense({units:a[n],activation:"relu",useBias:!0}));return t.add(_.d.dense({units:1,activation:"linear",useBias:!0})),t}))}},{key:"modelCompile",value:function(t){var e=_.k();return this.addModel(e),e.compile({optimizer:_.s.sgd(t),loss:"meanSquaredError"}),e}},{key:"train",value:function(){var t=Object(v.a)(x.a.mark((function t(e,a){var r,s,i,o,c,l,h,u,d=this;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=_.r((function(){return _.q(e)})),s=_.r((function(){return _.q(a)})),i=_.r((function(){return d.state.tensorFlowNN})),o=function(t){return new Promise((function(e){return setTimeout(e,t)}))},c=this.state.controls.playing;case 5:if(!1===c){t.next=17;break}return this.setState({stopRender:!0}),l=this.state.controls,h=l.playing,u=l.speed,c=h,t.next=11,i.fit(r,s,{epochs:1,batchSize:1});case 11:return _.r((function(){var t=i.predict(r),e=n.tensorToArray(t),s=_.f.meanSquaredError(a,e).dataSync()[0];d.printParameters(i,s,e,d.state.epoch+1)})),this.setState({stopRender:!1}),t.next=15,o(u);case 15:t.next=5;break;case 17:this.setState({tensorFlowNN:i}),_.c(r),_.c(s);case 20:case"end":return t.stop()}}),t,this)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"genTensorData",value:function(){var t=Object(v.a)(x.a.mark((function t(e,a,r){var s=this;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.j();case 2:_.r((function(){var t=_.e(-s.state.scale,s.state.scale,r),i=_.h(e(t),a),o=_.t(t),c=n.tensorToArray(t),l=n.tensorToArray(i),h=n.tensorToArray(o);s.setState({X:c,y:l,yhat:h})}));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"printParameters",value:function(t,e,a,n){for(var r=[],s=[],i=0;i<t.getWeights().length;i++)(i%2===0?r:s).push(Array.from(t.getWeights()[i].dataSync()));var o=[].concat(Object(rt.a)(this.state.lossArray),[e]);this.setState({biasesData:s,weightsData:r,loss:e,yhat:a,epoch:n,lossArray:o}),this.initNeuralNetwork(this.state.shape)}},{key:"asyncPause",value:function(){var t=Object(v.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setState({controls:Object(q.a)(Object(q.a)({},this.state.controls),{},{playing:!1})});case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"resetParameters",value:function(){var t=Object(v.a)(x.a.mark((function t(e){var a,n,r,s=this;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return _.c(this.state.tensorFlowNN),a=this.state.curve,_.r((function(){"sin"===a?n=_.m:"tanh"===a?n=_.p:"cos"===a&&(n=_.b)})),t.next=5,this.genTensorData(n,e,50);case 5:r=_.r((function(){return s.modelCompile(s.state.lr)})),this.setState({epoch:0,loss:null,weights:[],miniNN:null,tensorFlowNN:r,shapedWeights:[],lossArray:[]}),_.c(undefined);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"reset",value:function(){var t=Object(v.a)(x.a.mark((function t(e){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.asyncPause(),this.resetParameters(e);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=Object(v.a)(x.a.mark((function t(){var e,a=this;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:_.l("cpu"),this.genTensorData(_.m,this.state.scale,50),this.initNeuralNetwork(this.state.shape),e=_.r((function(){return a.modelCompile(.01)})),this.setState({tensorFlowNN:e});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(){return!this.state.stopRender}},{key:"render",value:function(){var t=this,e=this.state,a=e.X,n=e.y,r=e.shape,s=e.scale,i=e.miniNN,o=e.weightsData,c=e.biasesData,l=e.yhat,h=e.rects,u=e.weights,d=e.mode,p=e.epoch,j=e.curve,b=e.lr,g=e.loss,y=e.controls,S=e.shapedWeights,C=e.shapedLinks,E=e.shapedRects,N=e.keyFrameLayer,R=e.keyFrameLoss,I=e.subEpoch,W=e.isAnimating,z=e.singleInputExample,H=e.singleLabelExample,Z=e.lossSavings,K=e.controlCenterHelp,Q=e.customizationHelp,$=e.neuralNetworkHelp,tt=e.lossChange,et=e.scatterHelp,at=e.keyFrameScatter,nt=y.playing,rt=y.speed,st=[{label:"sin",eqn:_.m,scale:5},{label:"cos",eqn:_.b,scale:5},{label:"tanh",eqn:_.p,scale:5}],mt=Object(f.jsx)(X.a,{style:{background:this.state.controls.playing?"#D62839":"#175676",color:"white"},disableTouchRipple:!0,onClick:function(){return t.run()},children:nt?Object(f.jsx)(Y.a,{}):Object(f.jsx)(V.a,{})}),yt=Object(f.jsxs)(T.a,{children:[Object(f.jsx)(ot.a,{title:"reset",arrow:!0,children:Object(f.jsx)(U.a,{disabled:nt,onClick:function(){t.reset(s)},children:Object(f.jsx)(G.a,{})})}),mt,Object(f.jsx)(ot.a,{title:"slomo",arrow:!0,children:Object(f.jsx)(U.a,{style:{color:0===rt?"grey":"#FFC006"},onClick:function(){t.setState({controls:Object(q.a)(Object(q.a)({},y),{},{speed:0===rt?100:0})})},children:Object(f.jsx)(J.a,{})})})]}),xt=Object(f.jsx)(F.a,{marginTop:2,children:Object(f.jsxs)(T.a,{children:[Object(f.jsxs)(B.a,{onClick:Object(v.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.anim();case 2:case"end":return e.stop()}}),e)}))),disabled:W,style:{color:W?"lightgrey":"black"},variant:"outlined",children:[Object(f.jsx)(G.a,{})," ","  ","REPLAY"]}),Object(f.jsx)(B.a,{onClick:Object(v.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.randomInputGeneration(a,n,o,c,r,b,d),e.next=3,t.anim();case 3:case"end":return e.stop()}}),e)}))),style:{color:W?"lightgrey":"#4BA3C3"},disabled:W,variant:"outlined",children:"New Training Example"})]})}),vt=Object(f.jsxs)(F.a,{width:400,marginLeft:10,children:[Object(f.jsx)(A.a,{variant:"outlined",children:Object(f.jsxs)(L.a,{children:[Object(f.jsxs)(P.a,{variant:"caption",style:{color:"#4BA3C3"},children:["Control Center",Object(f.jsx)(U.a,{size:"small",style:{color:"orange"},onClick:function(){t.setState({controlCenterHelp:!0})},children:Object(f.jsx)(D.a,{})})]}),Object(f.jsx)("div",{}),Object(f.jsx)(ot.a,{title:Object(f.jsx)(P.a,{variant:"h6",children:d?"Click: Back":"Click: Epoch Mode"}),arrow:!0,placement:"right-start",open:null!==g||d&&!W,children:Object(f.jsx)(B.a,{disabled:null==g||W,onClick:Object(v.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=5;break}t.setState({subEpoch:""}),t.setState({mode:!d}),e.next=8;break;case 5:return t.randomInputGeneration(a,n,o,c,r,b,d),e.next=8,t.anim();case 8:case"end":return e.stop()}}),e)}))),children:Object(f.jsxs)(P.a,{variant:"h4",children:["Epoch: ",d?this.state.cpyEpoch:p]})})}),d?Object(f.jsxs)(T.a,{children:[Object(f.jsx)(P.a,{style:{color:"orange"},variant:"h6",children:"Phase:"}),Object(f.jsx)(B.a,{disabled:!0,style:{color:"forward"===I?"orange":"grey"},children:"Forward"}),Object(f.jsx)(B.a,{disabled:!0,style:{color:"backward"===I?"orange":"grey"},children:"Backward"}),Object(f.jsx)(B.a,{disabled:!0,style:{color:"update"===I?"orange":"grey"},children:"Update"})]}):"",Object(f.jsx)(P.a,{variant:"h6",children:null==g||d?"":"Loss: ".concat(g.toPrecision(6))}),Object(f.jsx)(P.a,{variant:"h6",style:{color:"#4BA3C3"},children:d?"Training Example: (".concat(z.toPrecision(3),", ").concat(H.toPrecision(3),")"):""}),Object(f.jsxs)(P.a,{variant:"h5",style:{color:at<3?"black":"orangered"},children:[d&&0!=tt?at<3?"loss: ":"new loss: ":"",d&&0!=tt?Object(f.jsx)(it.a,{value:tt,formatValue:function(t){return t.toPrecision(6)},duration:750}):""]}),Object(f.jsxs)(P.a,{style:{color:"grey"},variant:"caption",children:[at>3&&d?"loss decrease: ":"",at>3&&d?Object(f.jsx)(it.a,{value:this.state.lossDifference,formatValue:function(t){return t.toPrecision(6)},duration:750}):""]}),d?xt:yt,Object(f.jsx)(T.a,{})]})}),Object(f.jsx)(F.a,{marginTop:5,children:Object(f.jsx)(A.a,{variant:"outlined",children:Object(f.jsxs)(L.a,{children:[Object(f.jsxs)(P.a,{variant:"caption",style:{color:"#4BA3C3"},children:["Customization ",Object(f.jsx)(U.a,{size:"small",style:{color:"orange"},onClick:function(){t.setState({customizationHelp:!0})},children:Object(f.jsx)(D.a,{})})]}),Object(f.jsxs)(T.a,{children:[Object(f.jsx)(P.a,{variant:"caption",children:"Learning Rate"}),[.001,.005,.01,.05,.1].map((function(e,a){return Object(f.jsx)(ct.a,{disabled:nt||d,label:"".concat(e),style:{color:b===e?"white":"grey",background:b===e?"#175676":"lightgrey"},onClick:function(){_.r((function(){t.changeModelLr(e),t.reset(s)}))}},a)}))]}),Object(f.jsxs)(T.a,{children:[Object(f.jsx)(P.a,{variant:"caption",children:"Data Set"}),st.map((function(e,a){return Object(f.jsx)(ct.a,{disabled:nt||d,label:e.label,style:{color:j===e.label?"white":"grey",background:j===e.label?"#175676":"lightgrey"},onClick:function(){t.setState({shape:r,curve:e.label}),t.reset(s),_.r((function(){t.genTensorData(e.eqn,e.scale,50)}))}},a)}))]}),Object(f.jsxs)(T.a,{children:[Object(f.jsx)(P.a,{variant:"caption",children:"Neurons"}),Object(f.jsx)(M.a,{style:{color:"#175676"},defaultValue:2,disabled:nt||d,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,onChange:function(e,a){t.setState({sliderVal:a})},min:1,max:8}),Object(f.jsx)(B.a,{disabled:nt||d,onClick:function(){var e=r;e.length<5&&(e[e.length-1]=t.state.sliderVal,e.push(1),t.setState({shape:e}),t.initNeuralNetwork(e),t.reset(s))},children:"+"}),Object(f.jsx)(B.a,{disabled:nt||d,onClick:function(){var e=r;e.length>3&&(e.splice(e.length-2,1),t.setState({shape:e}),t.initNeuralNetwork(e),t.reset(s))},children:"\u2013"})]})]})})})]}),Ot=Object(f.jsxs)(F.a,{marginLeft:10,children:[Object(f.jsxs)(F.a,{children:[d?Object(f.jsx)(w,{width:300,height:300,padding:0,start:-s,stop:s,X:a,y:n,yhat:l,potential:this.state.potentialYhat,id:2,select:this.state.singleInputIndex,times:this.state.keyFrameScatter,shouldNotRender:this.state.shouldNotRender,status:this.state.status}):Object(f.jsx)(O,{width:300,height:300,padding:0,start:-s,stop:s,X:a,y:n,yhat:l,id:1,duration:100,select:-1}),Object(f.jsx)(U.a,{size:"small",style:{color:"orange",position:"relative",bottom:"300px",right:"40px"},onClick:function(){t.setState({scatterHelp:!0})},children:Object(f.jsx)(D.a,{})})]}),Object(f.jsx)(F.a,{marginTop:10,children:Object(f.jsx)(k,{lossArray:this.state.lossArray,duration:100})})]}),wt=Object(f.jsxs)(F.a,{children:[Object(f.jsx)(m,{miniNN:i,input:z,label:H,shapedWeights:S,shapedLinks:C,shapedRects:E,shape:r,biases:c,weights:u,rects:h,playing:nt?0===rt?"edgeForward":"edgeSlowed":"edgePaused",show:nt,mode:d,backward:this.state.direction,keyFrameLayer:N,keyFrameLoss:R,subEpoch:I,lossSavings:Z,isAnimating:W,lr:b}),Object(f.jsx)(U.a,{size:"small",style:{color:"orange",position:"relative",bottom:"500px",left:"100px"},onClick:function(){t.setState({neuralNetworkHelp:!0})},children:Object(f.jsx)(D.a,{})})]});return Object(f.jsxs)("div",{id:"app",children:[Object(f.jsx)(A.a,{variant:"outlined",style:{background:"#FAFAFA",outlineColor:"white",paddingBottom:"1em"},children:Object(f.jsxs)(L.a,{children:[Object(f.jsxs)(F.a,{display:"flex",justifyContent:"center",children:[Object(f.jsx)(F.a,{marginRight:90,children:Object(f.jsx)("img",{src:gt})}),Object(f.jsx)(F.a,{children:Object(f.jsx)(P.a,{variant:"h2",children:Object(f.jsx)("b",{children:"Backprop Tool"})})})]}),Object(f.jsxs)(F.a,{className:"regular",display:"flex",justifyContent:"center",marginTop:2,children:[wt,Ot,vt]})]})}),Object(f.jsxs)(lt.a,{PaperProps:{style:{backgroundColor:"#F7F7F7"}},open:K,children:[Object(f.jsx)(ht.a,{children:Object(f.jsx)(U.a,{onClick:function(){t.setState({controlCenterHelp:!1})},children:Object(f.jsx)(dt.a,{})})}),Object(f.jsxs)(ut.a,{children:[Object(f.jsx)("img",{src:pt,alt:"how to use control center",width:"100%"}),Object(f.jsxs)(P.a,{variant:"caption",children:["The ",Object(f.jsx)("em",{children:"control"})," center is where you"," ",Object(f.jsx)("em",{children:"control"})," the flow of the program. You can play, pause, slow down and reset."]}),Object(f.jsx)(F.a,{display:"flex",justifyContent:"center",children:Object(f.jsxs)(F.a,{marginBottom:5,children:[Object(f.jsx)(P.a,{variant:"h6",children:"What is an Epoch?"}),Object(f.jsx)(P.a,{variant:"body2",children:"An epoch is single iteration of training."}),Object(f.jsx)(P.a,{variant:"h6",children:"What is Loss?"}),Object(f.jsx)(P.a,{variant:"body2",children:"Loss tells you the error of the current predicitions. Lower is better."}),Object(f.jsx)(P.a,{variant:"h6",children:"How Do I go into Backpropogation Mode?"}),Object(f.jsx)(P.a,{variant:"body2",children:"Click on the EPOCH"})]})})]})]}),Object(f.jsxs)(lt.a,{PaperProps:{style:{backgroundColor:"#F7F7F7"}},open:Q,children:[Object(f.jsx)(ht.a,{children:Object(f.jsx)(U.a,{onClick:function(){t.setState({customizationHelp:!1})},children:Object(f.jsx)(dt.a,{})})}),Object(f.jsxs)(ut.a,{children:[Object(f.jsx)("img",{src:jt,alt:"how to use control center",width:"100%"}),Object(f.jsxs)(P.a,{variant:"caption",children:["The ",Object(f.jsx)("em",{children:"customization"})," is where you"," ",Object(f.jsx)("em",{children:"customize"})," data, learning rate, and model shape."]}),Object(f.jsx)(F.a,{display:"flex",justifyContent:"center",children:Object(f.jsxs)(F.a,{marginBottom:5,children:[Object(f.jsx)(P.a,{variant:"h6",children:"What is an Learning Rate?"}),Object(f.jsx)(P.a,{variant:"body2",children:"Learning rate roughly translates to the magnitiude of change each time parameters are updated. You could think of it as how big your steps are down a gradient."}),Object(f.jsx)(P.a,{variant:"body2",children:"The learning rate is applied to the opposite gradient after backpropogation."}),Object(f.jsx)(P.a,{variant:"h6",children:"Why would I change learning rate?"}),Object(f.jsx)(P.a,{variant:"body2",children:"Depending on the shape of the model and the amount of data,a higher learning rate could allow your model to take less epochs to reach the target loss. But if the learning rate is too large, you will never reach the minimum of loss that you want."})]})})]})]}),Object(f.jsxs)(lt.a,{PaperProps:{style:{backgroundColor:"#FAFAFA"}},open:$,children:[Object(f.jsx)(ht.a,{children:Object(f.jsx)(U.a,{onClick:function(){t.setState({neuralNetworkHelp:!1})},children:Object(f.jsx)(dt.a,{})})}),Object(f.jsxs)(ut.a,{children:[Object(f.jsx)("img",{src:bt,alt:"how to use control center",width:"100%"}),Object(f.jsx)(F.a,{display:"flex",justifyContent:"center",children:Object(f.jsxs)(F.a,{marginBottom:5,children:[Object(f.jsx)(P.a,{variant:"h6",children:"Summary"}),Object(f.jsx)(P.a,{variant:"body2",children:"Each grey square with a black outline is a neuron. Each connection indicates where the inputs travel. The thikness and the color of each connection also indicate the weight associated."}),Object(f.jsx)(P.a,{variant:"body2",children:"As the weights change, there will be a visible change in stroke size."})]})})]})]}),Object(f.jsxs)(lt.a,{PaperProps:{style:{backgroundColor:"#F7F7F7"}},open:et,children:[Object(f.jsx)(ht.a,{children:Object(f.jsx)(U.a,{onClick:function(){t.setState({scatterHelp:!1})},children:Object(f.jsx)(dt.a,{})})}),Object(f.jsxs)(ut.a,{children:[Object(f.jsx)("img",{src:ft,alt:"fitment",width:"100%"}),Object(f.jsx)(F.a,{display:"flex",justifyContent:"center",children:Object(f.jsxs)(F.a,{marginBottom:5,children:[Object(f.jsx)(P.a,{variant:"h6",children:"Summary"}),Object(f.jsx)(P.a,{variant:"body2",children:"The black line represents the current predictions of the neural network."}),Object(f.jsx)(P.a,{variant:"body2",children:"Each gray dot is a xy coordinate that represents the input and input label."})]})})]})]})]})}}]),a}(s.Component),Lt=(s.Component,function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){j.a.initialize("UA-192166007-1"),j.a.pageview("/")}},{key:"render",value:function(){var t=Object(f.jsx)("div",{children:Object(f.jsx)("img",{src:p,width:"100%"})}),e=Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"Reserve this space under the main tool for refereces, credit acknowledgements"})});return Object(f.jsxs)("div",{children:[t,Object(f.jsx)(nt,{}),Object(f.jsx)(K.Element,{name:"mainTool",children:Object(f.jsx)(At,{})}),e]})}}]),a}(s.Component)),Mt=(a(580),function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,624)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,s=e.getLCP,i=e.getTTFB;a(t),n(t),r(t),s(t),i(t)}))});c.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(Lt,{})}),document.getElementById("root")),Mt()}},[[581,1,2]]]);
//# sourceMappingURL=main.107a9f41.chunk.js.map